<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>04_iOS_swift_memo.md—/Users/shutaro/Dropbox/document/programing/apple</title>
    <style type="text/css">
    html{font-family: sans-serif;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%}body{margin: 0}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display: block}audio,canvas,progress,video{display: inline-block;vertical-align: baseline}audio:not([controls]){display: none;height: 0}[hidden],template{display: none}a{background: transparent}a:active,a:hover{outline: 0}abbr[title]{border-bottom: 1px dotted}b,strong{font-weight: bold}dfn{font-style: italic}h1{font-size: 2em;margin: 0.67em 0}mark{background: #ff0;color: #000}small{font-size: 80%}sub,sup{font-size: 75%;line-height: 0;position: relative;vertical-align: baseline}sup{top: -0.5em}sub{bottom: -0.25em}img{border: 0}svg:not(:root){overflow: hidden}figure{margin: 1em 40px}hr{box-sizing: content-box;height: 0}pre{overflow: auto}code,kbd,pre,samp{font-family: monospace, monospace;font-size: 1em}button,input,optgroup,select,textarea{color: inherit;font: inherit;margin: 0}button{overflow: visible}button,select{text-transform: none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance: button;cursor: pointer}button[disabled],html input[disabled]{cursor: default}button::-moz-focus-inner,input::-moz-focus-inner{border: 0;padding: 0}input{line-height: normal}input[type="checkbox"],input[type="radio"]{box-sizing: border-box;padding: 0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height: auto}input[type="search"]{-webkit-appearance: textfield;box-sizing: content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance: none}fieldset{border: 1px solid #c0c0c0;margin: 0 2px;padding: 0.35em 0.625em 0.75em}legend{border: 0;padding: 0}textarea{overflow: auto}optgroup{font-weight: bold}table{border-collapse: collapse;border-spacing: 0}td,th{padding: 0}*{box-sizing: border-box}input,select,textarea,button{font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"}body{min-width: 1020px;font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";color: #333;background-color: #fff}a{color: #4183c4;text-decoration: none}a:hover,a:active{text-decoration: underline}hr,.rule{height: 0;margin: 15px 0;overflow: hidden;background: transparent;border: 0;border-bottom: 1px solid #ddd}hr:before,.rule:before{display: table;content: ""}hr:after,.rule:after{display: table;clear: both;content: ""}h1,h2,h3,h4,h5,h6{margin-top: 15px;margin-bottom: 15px;line-height: 1.1}h1{font-size: 30px}h2{font-size: 21px}h3{font-size: 16px}h4{font-size: 14px}h5{font-size: 12px}h6{font-size: 11px}small{font-size: 90%}blockquote{margin: 0}.lead{margin-bottom: 30px;font-size: 20px;font-weight: 300;color: #555}.text-muted{color: #999}.text-danger{color: #bd2c00}.text-emphasized{font-weight: bold;color: #333}ul,ol{padding: 0;margin-top: 0;margin-bottom: 0}ol ol,ul ol{list-style-type: lower-roman}ul ul ol,ul ol ol,ol ul ol,ol ol ol{list-style-type: lower-alpha}dd{margin-left: 0}tt,code{font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;font-size: 12px}pre{margin-top: 0;margin-bottom: 0;font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace}#realtime .status{overflow: visible;position: absolute;top: -5px;left: 0;background: url("/public/images/github-status.png");width: 26px;height: 26px;display: block;margin: 0 5px 0 0}#realtime .up{background-position: 0 0}#realtime .problem{background-position: 0 -53px}#realtime .down{background-position: 0 -26px}.container{max-width: 920px;margin: 0 auto 20px auto}#header{background: #FAFAFA;background: -moz-linear-gradient(#FAFAFA, #EAEAEA);background: -webkit-linear-gradient(#FAFAFA, #EAEAEA);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#fafafa', endColorstr='#eaeaea')";border-bottom: 1px solid #CACACA;box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4),0 0 10px rgba(0, 0, 0, 0.1)}#markup{padding: 3px}#markup article{padding-top: 30px}.markdown-body{overflow: hidden;font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;font-size: 16px;line-height: 1.6;word-wrap: break-word}.markdown-body>*:first-child{margin-top: 0 !important}.markdown-body>*:last-child{margin-bottom: 0 !important}.markdown-body .absent{color: #c00}.markdown-body .anchor{position: absolute;top: 0;left: 0;display: block;padding-right: 6px;padding-left: 30px;margin-left: -30px}.markdown-body .anchor:focus{outline: none}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position: relative;margin-top: 1em;margin-bottom: 16px;font-weight: bold;line-height: 1.4}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{display: none;color: #000;vertical-align: middle}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{padding-left: 8px;margin-left: -30px;text-decoration: none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{display: inline-block}.markdown-body h1 tt,.markdown-body h1 code,.markdown-body h2 tt,.markdown-body h2 code,.markdown-body h3 tt,.markdown-body h3 code,.markdown-body h4 tt,.markdown-body h4 code,.markdown-body h5 tt,.markdown-body h5 code,.markdown-body h6 tt,.markdown-body h6 code{font-size: inherit}.markdown-body h1{padding-bottom: 0.3em;font-size: 2.25em;line-height: 1.2;border-bottom: 1px solid #eee}.markdown-body h1 .anchor{line-height: 1}.markdown-body h2{padding-bottom: 0.3em;font-size: 1.75em;line-height: 1.225;border-bottom: 1px solid #eee}.markdown-body h2 .anchor{line-height: 1}.markdown-body h3{font-size: 1.5em;line-height: 1.43}.markdown-body h3 .anchor{line-height: 1.2}.markdown-body h4{font-size: 1.25em}.markdown-body h4 .anchor{line-height: 1.2}.markdown-body h5{font-size: 1em}.markdown-body h5 .anchor{line-height: 1.1}.markdown-body h6{font-size: 1em;color: #777}.markdown-body h6 .anchor{line-height: 1.1}.markdown-body p,.markdown-body blockquote,.markdown-body ul,.markdown-body ol,.markdown-body dl,.markdown-body table,.markdown-body pre{margin-top: 0;margin-bottom: 16px}.markdown-body hr{height: 4px;padding: 0;margin: 16px 0;background-color: #e7e7e7;border: 0 none}.markdown-body ul,.markdown-body ol{padding-left: 2em}.markdown-body ul.no-list,.markdown-body ol.no-list{padding: 0;list-style-type: none}.markdown-body ul ul,.markdown-body ul ol,.markdown-body ol ol,.markdown-body ol ul{margin-top: 0;margin-bottom: 0}.markdown-body li>p{margin-top: 16px}.markdown-body dl{padding: 0}.markdown-body dl dt{padding: 0;margin-top: 16px;font-size: 1em;font-style: italic;font-weight: bold}.markdown-body dl dd{padding: 0 16px;margin-bottom: 16px}.markdown-body blockquote{padding: 0 15px;color: #777;border-left: 4px solid #ddd}.markdown-body blockquote>:first-child{margin-top: 0}.markdown-body blockquote>:last-child{margin-bottom: 0}.markdown-body table{display: block;width: 100%;overflow: auto;word-break: normal;word-break: keep-all}.markdown-body table th{font-weight: bold}.markdown-body table th,.markdown-body table td{padding: 6px 13px;border: 1px solid #ddd}.markdown-body table tr{background-color: #fff;border-top: 1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color: #f8f8f8}.markdown-body img{max-width: 100%;box-sizing: border-box}.markdown-body span.frame{display: block;overflow: hidden}.markdown-body span.frame>span{display: block;float: left;width: auto;padding: 7px;margin: 13px 0 0;overflow: hidden;border: 1px solid #ddd}.markdown-body span.frame span img{display: block;float: left}.markdown-body span.frame span span{display: block;padding: 5px 0 0;clear: both;color: #333}.markdown-body span.align-center{display: block;overflow: hidden;clear: both}.markdown-body span.align-center>span{display: block;margin: 13px auto 0;overflow: hidden;text-align: center}.markdown-body span.align-center span img{margin: 0 auto;text-align: center}.markdown-body span.align-right{display: block;overflow: hidden;clear: both}.markdown-body span.align-right>span{display: block;margin: 13px 0 0;overflow: hidden;text-align: right}.markdown-body span.align-right span img{margin: 0;text-align: right}.markdown-body span.float-left{display: block;float: left;margin-right: 13px;overflow: hidden}.markdown-body span.float-left span{margin: 13px 0 0}.markdown-body span.float-right{display: block;float: right;margin-left: 13px;overflow: hidden}.markdown-body span.float-right>span{display: block;margin: 13px auto 0;overflow: hidden;text-align: right}.markdown-body code,.markdown-body tt{padding: 0;padding-top: 0.2em;padding-bottom: 0.2em;margin: 0;font-size: 85%;background-color: rgba(0,0,0,0.04);border-radius: 3px}.markdown-body code:before,.markdown-body code:after,.markdown-body tt:before,.markdown-body tt:after{letter-spacing: -0.2em;content: "\00a0"}.markdown-body code br,.markdown-body tt br{display: none}.markdown-body del code{text-decoration: inherit}.markdown-body pre>code{padding: 0;margin: 0;font-size: 100%;word-break: normal;white-space: pre;background: transparent;border: 0}.markdown-body .highlight{margin-bottom: 16px}.markdown-body .highlight pre,.markdown-body pre{padding: 16px;overflow: auto;font-size: 85%;line-height: 1.45;background-color: #f7f7f7;border-radius: 3px}.markdown-body .highlight pre{margin-bottom: 0;word-break: normal}.markdown-body pre{word-wrap: normal}.markdown-body pre code,.markdown-body pre tt{display: inline;max-width: initial;padding: 0;margin: 0;overflow: initial;line-height: inherit;word-wrap: normal;background-color: transparent;border: 0}.markdown-body pre code:before,.markdown-body pre code:after,.markdown-body pre tt:before,.markdown-body pre tt:after{content: normal}.markdown-body kbd{display: inline-block;padding: 3px 5px;font-size: 11px;line-height: 10px;color: #555;vertical-align: middle;background-color: #fcfcfc;border: solid 1px #ccc;border-bottom-color: #bbb;border-radius: 3px;box-shadow: inset 0 -1px 0 #bbb}.codehilite{background: #ffffff}.codehilite .c{color: #999988;font-style: italic}.codehilite .err{color: #a61717;background-color: #e3d2d2}.codehilite .k{color: #000000;font-weight: bold}.codehilite .o{color: #000000;font-weight: bold}.codehilite .cm{color: #999988;font-style: italic}.codehilite .cp{color: #999999;font-weight: bold}.codehilite .c1{color: #999988;font-style: italic}.codehilite .cs{color: #999999;font-weight: bold;font-style: italic}.codehilite .gd{color: #000000;background-color: #ffdddd}.codehilite .gd .x{color: #000000;background-color: #ffaaaa}.codehilite .ge{color: #000000;font-style: italic}.codehilite .gr{color: #aa0000}.codehilite .gh{color: #999999}.codehilite .gi{color: #000000;background-color: #ddffdd}.codehilite .gi .x{color: #000000;background-color: #aaffaa}.codehilite .go{color: #888888}.codehilite .gp{color: #555555}.codehilite .gs{font-weight: bold}.codehilite .gu{color: #aaaaaa}.codehilite .gt{color: #aa0000}.codehilite .kc{color: #000000;font-weight: bold}.codehilite .kd{color: #000000;font-weight: bold}.codehilite .kp{color: #000000;font-weight: bold}.codehilite .kr{color: #000000;font-weight: bold}.codehilite .kt{color: #445588;font-weight: bold}.codehilite .m{color: #009999}.codehilite .s{color: #d14}.codehilite .na{color: #008080}.codehilite .nb{color: #0086B3}.codehilite .nc{color: #445588;font-weight: bold}.codehilite .no{color: #008080}.codehilite .ni{color: #800080}.codehilite .ne{color: #990000;font-weight: bold}.codehilite .nf{color: #990000;font-weight: bold}.codehilite .nn{color: #555555}.codehilite .nt{color: #000080}.codehilite .nv{color: #008080}.codehilite .ow{color: #000000;font-weight: bold}.codehilite .w{color: #bbbbbb}.codehilite .mf{color: #009999}.codehilite .mh{color: #009999}.codehilite .mi{color: #009999}.codehilite .mo{color: #009999}.codehilite .sb{color: #d14}.codehilite .sc{color: #d14}.codehilite .sd{color: #d14}.codehilite .s2{color: #d14}.codehilite .se{color: #d14}.codehilite .sh{color: #d14}.codehilite .si{color: #d14}.codehilite .sx{color: #d14}.codehilite .sr{color: #009926}.codehilite .s1{color: #d14}.codehilite .ss{color: #990073}.codehilite .bp{color: #999999}.codehilite .vc{color: #008080}.codehilite .vg{color: #008080}.codehilite .vi{color: #008080}.codehilite .il{color: #009999}
    </style>
    <style type="text/css">
      .markdown-body hr{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC")}
    </style>
  </head>
  <body>
    <div class="container">
      <div id="markup">
        <article id="content" class="markdown-body">
          <!-- Stylesheet -->

<p><link href="http://kevinburke.bitbucket.org/markdowncss/markdown.css" rel="stylesheet"></link>
<link href="http://sunsunsoft.com/css/hoge.css" rel="stylesheet"></link></p>
<p><span class="title">SwiftでiOSアプリ作成</span></p>
<!-- もくじ -->

<div class="toc">
<ul>
<li><a href="#uiwindow">UIWindow</a><ul>
<li><a href="#window">Windowを取得する</a></li>
</ul>
</li>
<li><a href="#uiviewcontroller">UIViewController</a><ul>
<li><a href="#_1">画面に表示する</a></li>
<li><a href="#view">デフォルトのviewをコードで生成する</a></li>
<li><a href="#xib">xibファイルから生成</a></li>
<li><a href="#uiviewcontroller_1">UIViewControllerを切り替える</a></li>
</ul>
</li>
<li><a href="#uinavigationcontroller">UINavigationController</a><ul>
<li><a href="#uinavigationcontroller_1">UINavigationControllerでできること</a></li>
<li><a href="#_2">プロパティ、メソッド</a></li>
<li><a href="#_3">サンプルコード</a></li>
</ul>
</li>
<li><a href="#uitableviewcontroller">UITableViewController</a><ul>
<li><a href="#_4">基礎</a></li>
<li><a href="#_5">サンプルコード</a><ul>
<li><a href="#uitableviewcontroller_1">シンプルなUITableViewController</a></li>
<li><a href="#xibcell">自前のxibのCellを使用する</a></li>
<li><a href="#_6">デリゲートメソッド</a></li>
<li><a href="#uitableview">UITableViewがステータスバーと重なる問題の対応</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#uitabbarcontroller">UITabBarController</a></li>
<li><a href="#uiviewsubclass">UIView(とそのSubClass)</a><ul>
<li><a href="#uiview">UIView</a><ul>
<li><a href="#_7">プロパティ・メソッド</a></li>
<li><a href="#view_1">メインViewを画面サイズと同じにする</a></li>
<li><a href="#uiview_1">UIViewオブジェクトを生成</a></li>
<li><a href="#uiview-addsubview">プログラムでUIViewを追加する addSubview</a></li>
<li><a href="#_8">位置・座標を変更する</a></li>
<li><a href="#_9">表示・非表示切り替え</a></li>
</ul>
</li>
<li><a href="#uiscrollview">UIScrollView</a></li>
<li><a href="#uilabel">UILabel</a><ul>
<li><a href="#_10">生成&amp;表示</a></li>
<li><a href="#_11">フォントを変更</a></li>
</ul>
</li>
<li><a href="#uiprogressview">UIProgressView</a></li>
<li><a href="#uipagecontrol">UIPageControl</a></li>
<li><a href="#uipickerview">UIPickerView</a></li>
<li><a href="#uisegmentedcontrol">UISegmentedControl</a></li>
<li><a href="#uislider">UISlider</a></li>
<li><a href="#uiswitch">UISwitch</a></li>
<li><a href="#uistepper">UIStepper</a></li>
<li><a href="#uitextfield">UITextField</a></li>
<li><a href="#uiwebview">UIWebView</a><ul>
<li><a href="#http">httpのページを読み込む方法</a></li>
<li><a href="#_12">サンプル</a></li>
<li><a href="#uiwebview_1">UIWebViewプロパティ</a></li>
<li><a href="#uiwebview_2">UIWebViewメソッド</a></li>
</ul>
</li>
<li><a href="#uibutton">UIButton</a><ul>
<li><a href="#_13">リンク</a></li>
<li><a href="#_14">ボタン生成のサンプル</a></li>
<li><a href="#_15">ボタンのテキストを変更する</a></li>
</ul>
</li>
<li><a href="#uiimageview">UIImageView</a><ul>
<li><a href="#_16">ステータスバーを非表示にする</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#nib">nib</a><ul>
<li><a href="#_17">サンプル</a></li>
<li><a href="#_18">メモ</a></li>
</ul>
</li>
<li><a href="#gesture">ジェスチャー gesture</a><ul>
<li><a href="#_19">ジェスチャーを追加する方法</a></li>
<li><a href="#_20">ジェスチャーの種類</a><ul>
<li><a href="#uitapgesturerecognizer">UITapGestureRecognizer (タップ)</a></li>
<li><a href="#uiswipegesturerecognizer">UISwipeGestureRecognizer (スワイプ)</a></li>
<li><a href="#uipinchgesturerecognizer">UIPinchGestureRecognizer (ピンチイン＆アウト)</a></li>
<li><a href="#uilongpressgesturerecognizer">UILongPressGestureRecognizer (長押し)</a></li>
<li><a href="#uipangesturerecognizer">UIPanGestureRecognizer (ピン、ドラッグ)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#selector">セレクタ selector</a></li>
<li><a href="#storage">ストレージ storage</a><ul>
<li><a href="#github">GitHubサンプルプログラム</a></li>
<li><a href="#nsuserdefaults">NSUserDefaults</a><ul>
<li><a href="#_21">メソッドとか</a></li>
<li><a href="#_22">サンプル</a></li>
</ul>
</li>
<li><a href="#coredata">CoreData</a><ul>
<li><a href="#_23">プロジェクト準備</a></li>
<li><a href="#_24">検索の条件指定</a></li>
</ul>
</li>
<li><a href="#nsfilemanager">NSFileManager</a><ul>
<li><a href="#_25">サンプル</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#uiimage">UIImage</a><ul>
<li><a href="#_26">生成</a></li>
</ul>
</li>
<li><a href="#cgcontext">CGContext</a><ul>
<li><a href="#cgcontext_1">シンプルなCGContext使用方法</a></li>
</ul>
</li>
<li><a href="#uicolor">UIColor</a></li>
<li><a href="#alertview">AlertView</a></li>
<li><a href="#cgpoint-cgrect-cgfloat">座標指定 CGPoint CGRect CGFloat</a><ul>
<li><a href="#cgfloat">CGFloat 浮動小数点</a></li>
<li><a href="#cgpoint">CGPoint 座標</a></li>
<li><a href="#cgrect">CGRect 矩形の座標とサイズ</a></li>
<li><a href="#layer">layerについて</a></li>
</ul>
</li>
<li><a href="#autolayout">Autolayout</a><ul>
<li><a href="#autolayout_1">コードでAutolayoutを追加する</a><ul>
<li><a href="#_27">サンプル</a><ul>
<li><a href="#1">1つづつ制約を追加する</a></li>
<li><a href="#_28">まとめて制約を追加する</a></li>
<li><a href="#_29">いろいろな制約</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#http_1">http通信</a><ul>
<li><a href="#nsurlsession">NSURLSession</a><ul>
<li><a href="#_30">同期型</a></li>
<li><a href="#_31">非同期型</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#afnetworking">AFNetworking</a><ul>
<li><a href="#afnetworking_1">AFNetworkingのインストール</a></li>
<li><a href="#_32">リンク</a></li>
<li><a href="#_33">パラメータ</a></li>
<li><a href="#_34">サンプル</a><ul>
<li><a href="#get">GETリクエストを送り、結果をプレーンテキストで受信</a></li>
<li><a href="#post">POSTリクエストを送り、結果をプレーンテキストで受信</a></li>
<li><a href="#json">JSONをそのまま取得</a></li>
<li><a href="#jsonpostjson">JSON形式のPOSTリクエストを送り、結果をJSON形式のテキストで受信</a></li>
<li><a href="#jsonpostjson_1">JSON形式のPOSTリクエストを送り、結果をJSONオブジェクトで受信</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#skills">便利・小技 skills</a><ul>
<li><a href="#storyboard">storyboardを使わないプログラムテンプレート</a></li>
<li><a href="#_35">画面サイズを取得</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>リンク</strong>
<!-- link:: -->
<a href="https://developer.apple.com/jp/documentation/">日本語に翻訳されたiOS/watchOS/tvOSのドキュメント</a></p>
<p><strong>Todo</strong>
<!-- todo:: --></p>
<ul>
<li>Webサーバーと通信</li>
<li>カメラのテスト</li>
<li>MapViewのテスト</li>
<li>高速画像描画 SpriteKit のテスト</li>
<li>実機でデバッグ(iPhone,iPad)</li>
</ul>
<p>//<em> 自前の画像作成(CGContext)
//</em> UITabBarController
// * UIActionSheet(選択肢つきポップアップ)
// * UIAlertView(メッセージ)
//* ファイルの読み書き</p>
<h1 id="uiwindow">UIWindow</h1>
<h3 id="window">Windowを取得する</h3>
<div class="codehilite"><pre><span class="n">window</span> <span class="p">=</span> <span class="bp">UIWindow</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span><span class="bp">UIScreen</span><span class="p">.</span><span class="n">mainScreen</span><span class="p">().</span><span class="n">bounds</span><span class="p">)</span>
</pre></div>


<h3></h3>
<h1 id="uiviewcontroller">UIViewController</h1>
<!-- uiviewcontroller:: -->

<h3 id="_1">画面に表示する</h3>
<p>windowのトップにViewControllerを表示する  </p>
<div class="codehilite"><pre><span class="c1">// UIViewControllerを生成して画面に貼り付ける(※ただしUIViewの色を変えないと見た目の変化なし)</span>
<span class="kd">let</span> <span class="nv">viewController</span> <span class="p">:</span> <span class="bp">UIViewController</span><span class="p">()</span>
<span class="n">viewController</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">grayColor</span><span class="p">()</span>
<span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span> <span class="p">=</span> <span class="n">viewController</span>

<span class="c1">// xibファイルを元にViewControllerを生成する</span>
<span class="c1">// MyViewController は UIViewControllerのサブクラス</span>
<span class="kd">let</span> <span class="nv">viewController2</span> <span class="p">=</span> <span class="n">MyViewController</span><span class="p">(</span><span class="n">nibName</span><span class="p">:</span> <span class="s">&quot;MyViewController&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">);</span>
</pre></div>


<h3 id="view">デフォルトのviewをコードで生成する</h3>
<p>スクリーンと同じサイズのUIViewを生成して viewに設定
これで画面サイズの異なるデバイスでも画面サイズとviewのサイズが一致する</p>
<div class="codehilite"><pre><span class="kd">class</span> <span class="nc">MyViewController</span> <span class="p">:</span> <span class="bp">UIViewController</span> <span class="p">{</span>

<span class="kr">override</span> <span class="kd">func</span> <span class="nf">loadView</span><span class="p">()</span> <span class="p">{</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">view</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="bp">UIScreen</span><span class="p">.</span><span class="n">mainScreen</span><span class="p">().</span><span class="n">bounds</span><span class="p">)</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>


<h3 id="xib">xibファイルから生成</h3>
<p>自前でレイアウトしたxibファイルからUIViewController(のサブクラス)を生成する</p>
<p>ViewController(nibName: "nibファイルの名前", bundle: nil)</p>
<div class="codehilite"><pre><span class="c1">// ViewController.xibから ViewController を生成する</span>
<span class="c1">// bundle は nilだとデフォルトのバンドルが使用される。バンドルとは画像とかxibとかのリソースが入った箱</span>
<span class="kc">self</span><span class="p">.</span><span class="n">viewController</span> <span class="p">=</span> <span class="n">ViewController</span><span class="p">(</span><span class="n">nibName</span><span class="p">:</span> <span class="s">&quot;ViewController&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</pre></div>


<h3 id="uiviewcontroller_1">UIViewControllerを切り替える</h3>
<h1 id="uinavigationcontroller">UINavigationController</h1>
<p><!-- uinavigationcontroller:: -->
NavigationControllerはViewControllerの上部にバー(NavigationBar)を表示したり、複数のViewControllerをスタックしたりできる。</p>
<p>NavigationControllerにViewControllerを表示させたところ。NavigationBarにはタイトル、左ボタン、右ボタンを表示できる。
<img alt="UINavigationController3" src="http://sunsunsoft.com/image/ios/navigationcontroller3.png"></p>
<p>ViewControllerをスタックしたケース。前のViewControllerに戻るためのボタンがNavigationBarの左側に表示されている。<br>
<img alt="UINavigationController2" src="http://sunsunsoft.com/image/ios/navigationcontroller2.png">  </p>
<h2 id="uinavigationcontroller_1">UINavigationControllerでできること</h2>
<ul>
<li>ナビゲーションバーにタイトル、ボタンを表示できる</li>
<li>画面をpush(前のページを保持しつつ新しいページを表示)</li>
<li>画面をpop(pushで進んだ画面を１つ前の画面に戻す)</li>
</ul>
<h2 id="_2">プロパティ、メソッド</h2>
<p><strong>UINavigationController</strong></p>
<table>
<thead>
<tr>
<th>メソッド・プロパティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pushViewController(viewController: UIViewController, animated: Bool)</td>
<td>ViewControllerをPushする(新しいページ)</td>
</tr>
<tr>
<td>popViewControllerAnimated(animated: Bool) -&gt; UIViewController?</td>
<td>ViewControllerをPopする(前のページ)</td>
</tr>
<tr>
<td>topViewController : UIViewController</td>
<td>一番先頭のViewControllerを返す</td>
</tr>
<tr>
<td>viewControllers : [UIViewController]</td>
<td>保持しているViewControllerの配列</td>
</tr>
<tr>
<td>navigationBarHidden</td>
<td>NavigationBarの表示状態を返す</td>
</tr>
<tr>
<td>navigationBar</td>
<td>NavigationBar</td>
</tr>
</tbody>
</table>
<p><strong>UIViewController</strong></p>
<table>
<thead>
<tr>
<th>メソッド・プロパティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>ナビゲーションバーに表示するタイトルを設定する</td>
</tr>
<tr>
<td>navigationController</td>
<td>UINavigationControllerを取得する（NavigationControllerで表示されている場合のみ有効)</td>
</tr>
<tr>
<td>navigationItem</td>
<td>NavigationBar項目のセット</td>
</tr>
</tbody>
</table>
<p><strong>UINavigationBar</strong>
ナビゲーションバー</p>
<table>
<thead>
<tr>
<th>メソッド・プロパティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tintColor</td>
<td>ナビゲーションバーの色を設定する</td>
</tr>
<tr>
<td>barStyle</td>
<td>UIBarStyle<br>.Default：灰色<br>.Black：黒色<br>.BlackTranslucent:黒透明</td>
</tr>
</tbody>
</table>
<p><strong>UINavigationItem</strong>
Navigationに表示する項目。タイトルや左右のボタンなどはこのクラスのサブクラス  </p>
<table>
<thead>
<tr>
<th>メソッド・プロパティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>タイトルに表示する文字列</td>
</tr>
<tr>
<td>titleView</td>
<td>タイトル部分に表示するUIView</td>
</tr>
<tr>
<td>backBarButtonItem</td>
<td>前のViewControllerに戻るUIBarButtonItem</td>
</tr>
<tr>
<td>leftBarButtonItem</td>
<td>バーの左側に表示されるボタン(backBarButtonItemが表示されている時はかぶるので使用しない)</td>
</tr>
<tr>
<td>rightBarButtonItem</td>
<td>バーの右側に表示されるボタン</td>
</tr>
</tbody>
</table>
<h2 id="_3">サンプルコード</h2>
<p><strong>生成</strong><br>
UINavigationControllerを生成する場合は、そこに表示するUIViewControllerを生成する。</p>
<div class="codehilite"><pre><span class="kd">let</span> <span class="nv">viewController1</span> <span class="p">=</span> <span class="n">ViewController</span><span class="p">(</span><span class="n">nibName</span><span class="p">:</span> <span class="s">&quot;ViewController&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">navigationController</span> <span class="p">=</span> <span class="n">NavigationController1</span><span class="p">(</span><span class="n">rootViewController</span><span class="p">:</span> <span class="n">viewController1</span><span class="p">!)</span>
<span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span> <span class="p">=</span> <span class="n">navigationController</span>
</pre></div>


<p><strong>その他</strong></p>
<div class="codehilite"><pre><span class="c1">// push</span>
<span class="c1">// 新しいViewControllerを生成し、それを表示する</span>
<span class="kd">let</span> <span class="nv">viewController</span> <span class="p">=</span> <span class="n">ViewController</span><span class="p">(</span><span class="n">nibName</span><span class="p">:</span> <span class="s">&quot;ViewController&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">?.</span><span class="n">pushViewController</span><span class="p">(</span><span class="n">viewController</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>

<span class="c1">// スタックに積まれたViewControllerのうち、指定のViewControllerの場所までpopする </span>
<span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">?.</span><span class="n">popToViewController</span><span class="p">(</span><span class="n">viewController1</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>

<span class="c1">// ルートまでpopする</span>
<span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">?.</span><span class="n">popToRootViewControllerAnimated</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>

<span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// タイトルの文字列を変更</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="s">&quot;hoge&quot;</span>

    <span class="c1">// タイトルのViewを変更</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">titleView</span> <span class="p">=</span> <span class="bp">UIImageView</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">&quot;image/hoge.png&quot;</span><span class="p">))</span>

    <span class="c1">// バーのスタイルを変更</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">!.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">barStyle</span> <span class="p">=</span> <span class="n">UIBarStyle</span><span class="p">.</span><span class="n">BlackTranslucent</span>

    <span class="c1">// ナビゲーションを透明にする</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">!.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">setBackgroundImage</span><span class="p">(</span><span class="bp">UIImage</span><span class="p">(),</span> <span class="n">forBarMetrics</span><span class="p">:</span> <span class="p">.</span><span class="n">Default</span><span class="p">)</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">!.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">shadowImage</span> <span class="p">=</span> <span class="bp">UIImage</span><span class="p">()</span>

    <span class="c1">// バーの背景色(半透明)</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">!.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">tintColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">greenColor</span><span class="p">()</span>

    <span class="c1">// バーの背景色(半透明なし)</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">!.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">barTintColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">greenColor</span><span class="p">()</span>

    <span class="c1">// 戻るボタンのテキスト変更</span>
    <span class="kd">let</span> <span class="nv">backButtonItem</span> <span class="p">=</span> <span class="bp">UIBarButtonItem</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;&lt; 戻る&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="n">Plain</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="n">navigationItem</span><span class="p">.</span><span class="n">backBarButtonItem</span> <span class="p">=</span> <span class="n">backButtonItem</span>

    <span class="c1">// 戻るボタンの背景画像</span>
    <span class="bp">UIBarButtonItem</span><span class="p">.</span><span class="n">appearance</span><span class="p">().</span><span class="n">setBackButtonBackgroundImage</span><span class="p">(</span><span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">&quot;Back&quot;</span><span class="p">),</span> <span class="n">forState</span><span class="p">:</span> <span class="p">.</span><span class="n">Normal</span><span class="p">,</span> <span class="n">barMetrics</span><span class="p">:</span> <span class="p">.</span><span class="n">Default</span><span class="p">)</span>

    <span class="c1">// バーの右にテキストボタンを追加</span>
    <span class="kd">let</span> <span class="nv">debugBarButton</span> <span class="p">=</span> <span class="bp">UIBarButtonItem</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Debug&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="n">UIBarButtonItemStyle</span><span class="p">.</span><span class="n">Plain</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">debugButtonTapped</span><span class="p">(</span><span class="kc">_</span><span class="p">:)))</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">leftBarButtonItem</span> <span class="p">=</span> <span class="n">debugBarButton</span>

    <span class="c1">// UIImageからバーのボタンを作成、設定する</span>
    <span class="kd">let</span> <span class="nv">barButton</span> <span class="p">=</span> <span class="bp">UIBarButtonItem</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span><span class="s">&quot;image/hoge2.png&quot;</span><span class="p">),</span> <span class="n">style</span><span class="p">:</span> <span class="n">UIBarButtonItemStyle</span><span class="p">.</span><span class="n">Plain</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">buttonTapped</span><span class="p">(</span><span class="kc">_</span><span class="p">:)))</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">rightBarButtonItem</span> <span class="p">=</span> <span class="n">barButton</span>

    <span class="c1">// UIView(とそのサブクラス)からボタンを作成、設定する</span>
    <span class="kd">let</span> <span class="nv">imageView</span> <span class="p">=</span> <span class="bp">UIImageView</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span><span class="s">&quot;image/hoge.png&quot;</span><span class="p">))</span>
    <span class="kd">let</span> <span class="nv">barButton</span> <span class="p">=</span> <span class="bp">UIBarButtonItem</span><span class="p">(</span><span class="n">customView</span><span class="p">:</span> <span class="n">imageView</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<h1 id="uitableviewcontroller">UITableViewController</h1>
<p><!-- uitableviewcontroller:: -->
表示データが上下に並んだリストを管理する。</p>
<h2 id="_4">基礎</h2>
<p>NSIndexPath<br>
セルのセクション番号と行番号を保持する
  * section  セクション
  * row  行</p>
<h2 id="_5">サンプルコード</h2>
<table>
<thead>
<tr>
<th>プログラム</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/ViewController/ViewController/TableView/SimpleTableViewController.swift">SimpleTableViewController.swift</a></td>
<td>セルを表示するだけのシンプルなTableView</td>
</tr>
<tr>
<td><a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/ViewController/ViewController/TableView/SimpleTableViewController2.swift">SimpleTableViewController2.swift</a></td>
<td>セクションとセルを表示するシンプルなTableView</td>
</tr>
<tr>
<td><a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/ViewController/ViewController/TableView/TableViewController.swift">TableViewController.swift</a></td>
<td>セクションやセルに自前のxibを表示する</td>
</tr>
<tr>
<td><a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/ViewController/ViewController/TableView/EditableTableViewController.swift">EditableTableViewController.swift</a></td>
<td>セルを移動、削除できるTableView</td>
</tr>
</tbody>
</table>
<h3 id="uitableviewcontroller_1">シンプルなUITableViewController</h3>
<p>自前のセルを使わないシンプルなUIViewControllerのサンプル</p>
<p><strong>ファイルを追加</strong><br>
XCodeでファイルを追加  </p>
<div class="codehilite"><pre><span class="n">SimpleTableViewController</span><span class="p">.</span><span class="n">swift</span>

<span class="kd">class</span> <span class="nc">SimpleTableViewController</span><span class="p">:</span> <span class="bp">UITableViewController</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nv">cellNum</span> <span class="p">=</span> <span class="mi">30</span>
    <span class="kd">let</span> <span class="nv">cellHeight</span> <span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="mf">80.0</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="c1">// ステータスバーの上にUITableViewが表示されないように位置をずらす</span>
        <span class="kd">let</span> <span class="nv">statusBarHeight</span> <span class="p">=</span> <span class="bp">UIApplication</span><span class="p">.</span><span class="n">sharedApplication</span><span class="p">().</span><span class="n">statusBarFrame</span><span class="p">.</span><span class="n">height</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">tableView</span><span class="p">.</span><span class="n">contentInset</span><span class="p">.</span><span class="n">top</span> <span class="p">=</span> <span class="n">statusBarHeight</span>

    <span class="p">}</span>

    <span class="c1">// </span><span class="cs">MARK:</span><span class="c1"> - UITableViewDelegate</span>

    <span class="c1">// セクション数を返す</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">numberOfSectionsInTableView</span><span class="p">(</span><span class="n">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="p">}</span>

    <span class="c1">// 行数を返す</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">numberOfRowsInSection</span> <span class="n">section</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">cellNum</span>
    <span class="p">}</span>

    <span class="c1">// セルを返す</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">cellForRowAtIndexPath</span> <span class="n">indexPath</span><span class="p">:</span> <span class="bp">NSIndexPath</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UITableViewCell</span>
    <span class="p">{</span>
        <span class="c1">// デフォルトで用意されたセルを返す</span>
        <span class="kd">let</span> <span class="nv">cell</span> <span class="p">=</span> <span class="bp">UITableViewCell</span><span class="p">(</span><span class="n">style</span><span class="p">:</span> <span class="n">UITableViewCellStyle</span><span class="p">.</span><span class="n">Subtitle</span><span class="p">,</span> <span class="n">reuseIdentifier</span><span class="p">:</span> <span class="s">&quot;MyTestCell&quot;</span><span class="p">)</span>
        <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">!.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;hoge selction:</span><span class="si">\(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="si">)</span><span class="s"> : row:</span><span class="si">\(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="si">)</span><span class="s">&quot;</span>
        <span class="n">cell</span><span class="p">.</span><span class="n">detailTextLabel</span><span class="p">!.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;detail&quot;</span>

        <span class="c1">// １つおきに色を変える</span>
        <span class="k">if</span> <span class="n">indexPath</span><span class="p">.</span><span class="n">row</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">==</span> <span class="mi">0</span> <span class="p">{</span>
            <span class="n">cell</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">grayColor</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">cell</span>

    <span class="p">}</span>

    <span class="c1">// </span><span class="cs">MARK:</span><span class="c1"> - UITableViewDelegate</span>

    <span class="c1">// セルの高さを返す</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">heightForRowAtIndexPath</span> <span class="n">indexPath</span><span class="p">:</span> <span class="bp">NSIndexPath</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">CGFloat</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">cellHeight</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">AppDelegate</span><span class="p">.</span><span class="n">swift</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="n">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="bp">NSObject</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
<span class="p">{</span>
    <span class="n">window</span> <span class="p">=</span> <span class="bp">UIWindow</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span><span class="bp">UIScreen</span><span class="p">.</span><span class="n">mainScreen</span><span class="p">().</span><span class="n">bounds</span><span class="p">);</span>
    <span class="n">simpleTableViewController</span> <span class="p">=</span> <span class="n">SimpleTableViewController</span><span class="p">()</span>
    <span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span> <span class="p">=</span> <span class="n">simpleTableViewController</span>
<span class="p">}</span>
</pre></div>


<p>https://github.com/seafield1979/ios_programing/blob/develop/swift/ViewController/ViewController/TableView/EditableTableViewController.swift</p>
<h3 id="xibcell">自前のxibのCellを使用する</h3>
<p>UITableViewにxibでデザインしたセルを使用する方法</p>
<p>UITableViewControllerでできること</p>
<ul>
<li>テーブルを表示する</li>
<li>セル（テーブルに表示されるデータ）をカスタマイズできる</li>
<li>セクションのヘッダーとフッターを表示できる（セクション１、セクション１のデータ、セクション２、セクション２のデータ〜のような表示順になる）</li>
<li>テーブルに表示するセルは自前でデザインしたものを使用できる</li>
<li>テーブルの行を追加、削除できる</li>
<li>テーブルの行の並び替えができる</li>
</ul>
<p><strong>ファイルを追加する</strong><br>
  [iOS] - [Cocoa Touch Class] で　Next  </p>
<p><img alt="UITableViewCell1" src="http://sunsunsoft.com/image/ios/uitableviewcell_1.png"></p>
<ul>
<li>Class:  [適当なCell名]</li>
<li>Subclass of : UITableViewCell</li>
<li>Also create XIB file をチェック</li>
<li>で Next、ファイル作成場所を選択してから Create</li>
<li>これで UITableViewCell のサブクラス(今回はHogeCellクラス)のswfitファイルと、xibファイルが作成される</li>
</ul>
<p><img alt="UITableViewCell1" src="http://sunsunsoft.com/image/ios/uitableviewcell_2.png"></p>
<p><strong>xibを編集</strong>
    2で作成しそのままだと何も表示されないので、UILabelを配置する(-&gt;label1)。
    label1を HogeCellのクラスに連結する</p>
<p><a href="http://sunsunsoft.com/image/ios/uitableviewcell_3.png"><img alt="UITableViewCell1" src="http://sunsunsoft.com/image/ios/uitableviewcell_3.png"></a></p>
<p><strong>ソース編集</strong></p>
<div class="codehilite"><pre><span class="kd">class</span> <span class="nc">MyViewController</span><span class="p">:</span> <span class="bp">UITableViewController</span> <span class="p">{</span>

<span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
<span class="p">...</span>
    <span class="c1">// セル用のxibを登録する</span>
    <span class="kd">let</span> <span class="nv">nib</span> <span class="p">=</span> <span class="bp">UINib</span><span class="p">(</span><span class="n">nibName</span><span class="p">:</span> <span class="s">&quot;HogeCell&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>

    <span class="c1">// registerNibで登録 forCellReuseIdentifierの名前はなんでもOK</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">tableView</span><span class="p">.</span><span class="n">registerNib</span><span class="p">(</span><span class="n">nib</span><span class="p">,</span> <span class="n">forCellReuseIdentifier</span><span class="p">:</span> <span class="s">&quot;cell1&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// UITableViewControllerのセルを返すメソッド</span>
<span class="kr">override</span> <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">cellForRowAtIndexPath</span> <span class="n">indexPath</span><span class="p">:</span> <span class="bp">NSIndexPath</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UITableViewCell</span>
<span class="p">{</span>
    <span class="c1">// 自前の</span>
    <span class="kd">let</span> <span class="nv">cell</span> <span class="p">=</span> <span class="n">tableView</span><span class="p">.</span><span class="n">dequeueReusableCellWithIdentifier</span><span class="p">(</span><span class="s">&quot;cell1&quot;</span><span class="p">,</span> <span class="n">forIndexPath</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span> <span class="kc">as</span><span class="p">!</span> <span class="n">MyTableViewCell</span>

    <span class="c1">// HogeCellに配置したラベル(label1)にテキストを設定する</span>
    <span class="n">cell</span><span class="p">.</span><span class="n">label1</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;hoge selction:</span><span class="si">\(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="si">)</span><span class="s"> : row:</span><span class="si">\(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="si">)</span><span class="s">&quot;</span>
    <span class="k">return</span> <span class="n">cell</span>
<span class="p">}</span>
</pre></div>


<h3 id="_6">デリゲートメソッド</h3>
<p><strong>UITableViewDataSource</strong><br>
テーブルの表示に必須な情報を取得するメソッド。UITableViewControllerにどのような情報をどれだけ表示したら良いかを教えてあげる。主にテーブルがロード時に呼ばれる。</p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>numberOfSectionsInTableView(tableView: UITableView) -&gt; Int</td>
<td>セクション数を返す（ロード時）</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int</td>
<td>(指定セクションの）行数を返す</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell</td>
<td>セルを返す</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, titleForHeaderInSection section: Int) -&gt; String?</td>
<td>セクションヘッダーのタイトルを返す</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, titleForFooterInSection section: Int) -&gt; String?</td>
<td>セクションフッターのタイトルを返す</td>
</tr>
</tbody>
</table>
<p><strong>UITableViewDelegate</strong><br>
主に表示系の情報を返すメソッド</p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -&gt; CGFloat</td>
<td>セルの高さを返す</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, heightForHeaderInSection section: Int) -&gt; CGFloat</td>
<td>セクションヘッダーの高さを返す</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, heightForFooterInSection section: Int) -&gt; CGFloat</td>
<td>セクションフッターの高さを返す</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int)</td>
<td>セクションヘッダーの表示(背景色等)を設定する</td>
</tr>
<tr>
<td>tableView(tableView: UITableView, willDisplayFooterView view: UIView, forSection section: Int)</td>
<td>セクションフッターの表示(背景色等)を設定する</td>
</tr>
</tbody>
</table>
<h3 id="uitableview">UITableViewがステータスバーと重なる問題の対応</h3>
<p>override func viewDidLoad() {
    // これを追加する
    self.tableView.contentInset.top = 50
}</p>
<h1 id="uitabbarcontroller">UITabBarController</h1>
<p>以下のサンプルを参考にする
<a href="https://github.com/seafield1979/ios_programing/tree/develop/swift/ViewController/ViewController/TabBarView">GitHub TabBarView</a>  </p>
<p>基本は</p>
<ul>
<li>UITabBarController のサブクラスを作成する(xibは作らない)</li>
<li>UITabBarControllerのviewDidLoadでTabBarに表示するViewControllerを作成し、setViewControllersで設定する</li>
<li>UITabBarControllerのTabBarを追加する(いくつか方法がある)</li>
</ul>
<div class="codehilite"><pre><span class="kd">class</span> <span class="nc">MyTabBarController</span><span class="p">:</span> <span class="bp">UITabBarController</span> <span class="p">{</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="n">Tab1View</span> <span class="p">=</span> <span class="n">Tab1ViewController</span><span class="p">()</span>
        <span class="n">Tab2View</span> <span class="p">=</span> <span class="n">Tab2ViewController</span><span class="p">()</span>
        <span class="n">Tab3View</span> <span class="p">=</span> <span class="n">Tab3ViewController</span><span class="p">()</span>
        <span class="n">Tab4View</span> <span class="p">=</span> <span class="n">Tab4ViewController</span><span class="p">()</span>

        <span class="c1">// タブで表示するViewControllerを配列に格納する</span>
        <span class="kd">let</span> <span class="nv">myTabs</span> <span class="p">=</span> <span class="p">[</span><span class="n">Tab1View</span><span class="p">!,</span> <span class="n">Tab2View</span><span class="p">!,</span> <span class="n">Tab3View</span><span class="p">!,</span> <span class="n">Tab4View</span><span class="p">!]</span>

        <span class="c1">// 配列をTabにセット</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">setViewControllers</span><span class="p">(</span><span class="n">myTabs</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>

        <span class="c1">// TabBarにアイコンを設定</span>
        <span class="n">Tab1View</span><span class="p">.</span><span class="n">tabBarItem</span> <span class="p">=</span> <span class="bp">UITabBarItem</span><span class="p">(</span><span class="n">tabBarSystemItem</span><span class="p">:</span> <span class="n">UITabBarSystemItem</span><span class="p">.</span><span class="n">Featured</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">Tab2View</span><span class="p">.</span><span class="n">tabBarItem</span> <span class="p">=</span> <span class="bp">UITabBarItem</span><span class="p">(</span><span class="n">tabBarSystemItem</span><span class="p">:</span> <span class="n">UITabBarSystemItem</span><span class="p">.</span><span class="n">Bookmarks</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">Tab3View</span><span class="p">.</span><span class="n">tabBarItem</span> <span class="p">=</span> <span class="bp">UITabBarItem</span><span class="p">(</span><span class="n">tabBarSystemItem</span><span class="p">:</span> <span class="n">UITabBarSystemItem</span><span class="p">.</span><span class="n">Search</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">Tab4View</span><span class="p">.</span><span class="n">tabBarItem</span> <span class="p">=</span> <span class="bp">UITabBarItem</span><span class="p">(</span><span class="n">tabBarSystemItem</span><span class="p">:</span> <span class="n">UITabBarSystemItem</span><span class="p">.</span><span class="n">Downloads</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h1 id="uiviewsubclass">UIView(とそのSubClass)</h1>
<p><!-- uiview:: -->
矩形を表示するオブジェクト。とりあえず画面に何か表示したいときはこのクラスか、このクラスのサブクラスを作ってメインのViewにaddSubviewする。</p>
<h2 id="uiview">UIView</h2>
<h3 id="_7">プロパティ・メソッド</h3>
<p><strong>プロパティ</strong></p>
<table>
<thead>
<tr>
<th>プロパティ名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>superview UIView?</td>
<td>親View</td>
</tr>
<tr>
<td>subviews [UIView]</td>
<td>子View</td>
</tr>
<tr>
<td>tag (Int)</td>
<td>識別用のタグ</td>
</tr>
<tr>
<td>hidden (Bool)</td>
<td>trueならViewを非表示</td>
</tr>
</tbody>
</table>
<p><strong>メソッド</strong></p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>addSubview()</td>
<td>子Viewを追加する</td>
</tr>
<tr>
<td>removeFromSuperview()</td>
<td>親Viewから自身を削除する</td>
</tr>
<tr>
<td>drawRect(rect : CGRect)</td>
<td>図形を描画する</td>
</tr>
</tbody>
</table>
<h3 id="view_1">メインViewを画面サイズと同じにする</h3>
<div class="codehilite"><pre><span class="kd">class</span> <span class="nc">MyViewController</span> <span class="p">{</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">loadView</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// スクリーンと同じサイズのUIViewを生成して viewに設定</span>
        <span class="c1">// これで画面サイズの異なるデバイスでも画面サイズとviewのサイズが一致する</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">view</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="bp">UIScreen</span><span class="p">.</span><span class="n">mainScreen</span><span class="p">().</span><span class="n">bounds</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="uiview_1">UIViewオブジェクトを生成</h3>
<div class="codehilite"><pre><span class="c1">// 座標とサイズを指定してUIViewを作る</span>
<span class="kd">let</span> <span class="nv">view1</span> <span class="p">:</span> <span class="bp">UIView</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span><span class="mi">100</span><span class="p">)</span>

<span class="c1">// そのままだと透明で見えないので色を設定</span>
<span class="n">view1</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">redColor</span><span class="p">()</span>

<span class="c1">// とりあえず表示してみる(表示済みのViewにaddSubview)</span>
<span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span><span class="p">!.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">view1</span><span class="p">)</span>
</pre></div>


<h3 id="uiview-addsubview">プログラムでUIViewを追加する addSubview</h3>
<p><!-- addsubview:: -->
func addSubview(_ view: UIView)</p>
<p><code>[追加先のView].addSubview([追加するView])</code></p>
<div class="codehilite"><pre><span class="n">viewController</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">label1</span><span class="p">)</span>
</pre></div>


<h3 id="_8">位置・座標を変更する</h3>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nv">view</span> <span class="p">:</span> <span class="bp">UIView</span><span class="p">?</span>

<span class="err">〜〜〜</span>

<span class="c1">//座標を設定</span>
<span class="n">view</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">y</span><span class="p">],</span> <span class="p">[</span><span class="n">width</span><span class="p">],</span> <span class="p">[</span><span class="n">height</span><span class="p">])</span>

<span class="c1">//座標を移動(x+100)</span>
<span class="n">view</span><span class="p">?.</span><span class="n">frame</span> <span class="p">=</span> <span class="bp">CGRect</span><span class="p">(</span><span class="n">view</span><span class="p">?.</span><span class="n">frame</span><span class="p">!.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span>
                        <span class="n">view</span><span class="p">?.</span><span class="n">frame</span><span class="p">!.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
                        <span class="n">view</span><span class="p">?.</span><span class="n">frame</span><span class="p">!.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span>
                        <span class="n">view</span><span class="p">?.</span><span class="n">frame</span><span class="p">!.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>

<span class="c1">//サイズを変更(width=100,height=200)</span>
<span class="n">view</span><span class="p">?.</span><span class="n">frame</span> <span class="p">=</span> <span class="bp">CGRect</span><span class="p">(</span><span class="n">view</span><span class="p">?.</span><span class="n">frame</span><span class="p">!.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
                        <span class="n">view</span><span class="p">?.</span><span class="n">frame</span><span class="p">!.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
                        <span class="mf">100.0</span>
                        <span class="mf">200.0</span><span class="p">)</span>
</pre></div>


<h3 id="_9">表示・非表示切り替え</h3>
<div class="codehilite"><pre><span class="c1">//表示</span>
</pre></div>


<h2 id="uiscrollview">UIScrollView</h2>
<p><!-- uiscrollview:: -->
スクロール可能なView。内部に表示領域より大きいView(サイズはcontentsize)を保持して、ContentOffsetで指定した位置から部分的に画面に表示する。</p>
<p><img alt="UIScrollView" src="http://sunsunsoft.com/image/ios/scrollview.png"></p>
<div class="codehilite"><pre><span class="c1">// UIScrollViewを作成</span>
<span class="kd">let</span> <span class="nv">scrollView</span> <span class="p">=</span> <span class="bp">UIScrollView</span><span class="p">(</span> <span class="n">frame</span><span class="p">:</span> <span class="n">CGRectMake</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">))</span>

<span class="c1">// 全体の領域(viewのサイズよりも大きくするとスクロール可能になる)</span>
<span class="n">scrollView</span><span class="p">.</span><span class="n">contentSize</span> <span class="p">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">pageMax</span><span class="p">),</span> <span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>

<span class="n">scrollView</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">blueColor</span><span class="p">()</span>

<span class="c1">// ページごとのスクロールにする</span>
<span class="n">scrollView</span><span class="p">.</span><span class="n">pagingEnabled</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// ステータスバータップでトップにスクロールする機能をOFFにする</span>
<span class="n">scrollView</span><span class="p">.</span><span class="n">scrollsToTop</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// delegateメソッドを使用できるようにする</span>
<span class="n">scrollView</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>

<span class="c1">// 親viewに追加</span>
<span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">scrollView</span><span class="p">)</span>

<span class="c1">// UIScrollViewDelegateメソッド</span>
<span class="c1">// スクロール時の処理（スクロール中に毎フレーム呼ばれる）</span>
<span class="kd">func</span> <span class="nf">scrollViewDidScroll</span><span class="p">(</span> <span class="n">scrollView</span><span class="p">:</span> <span class="bp">UIScrollView</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 現在のページ数を UIPageControl に設定</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;</span><span class="si">\(</span><span class="n">scrollView</span><span class="p">.</span><span class="n">contentOffset</span><span class="p">.</span><span class="n">x</span><span class="si">)</span><span class="s"> :  </span><span class="si">\(</span><span class="n">scrollView</span><span class="p">.</span><span class="n">contentOffset</span><span class="p">.</span><span class="n">y</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<h2 id="uilabel">UILabel</h2>
<p><!-- uilabel:: -->
画面にテキストを表示したい場合に使用する</p>
<h3 id="_10">生成&amp;表示</h3>
<div class="codehilite"><pre><span class="c1">// シンプルなラベルを作成</span>
<span class="kd">let</span> <span class="nv">label1</span> <span class="p">:</span> <span class="bp">UILabel</span> <span class="p">=</span> <span class="bp">UILabel</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="bp">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">))</span>
<span class="n">label1</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;Hello World!!&quot;</span>
<span class="n">viewController</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">label1</span><span class="p">)</span>

<span class="c1">// カスタマイズしたラベルを作成</span>
<span class="kd">let</span> <span class="nv">label</span> <span class="p">=</span> <span class="bp">UILabel</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
<span class="n">label</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;らべる&quot;</span>

<span class="c1">// テキスト中央寄せ</span>
<span class="n">label</span><span class="p">.</span><span class="n">textAlignment</span> <span class="p">=</span> <span class="n">NSTextAlignment</span><span class="p">.</span><span class="n">Center</span>

<span class="c1">// テキストの色</span>
<span class="n">label</span><span class="p">.</span><span class="n">textColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">blueColor</span><span class="p">()</span>

<span class="c1">// フォント</span>
<span class="n">label</span><span class="p">.</span><span class="n">font</span> <span class="p">=</span> <span class="bp">UIFont</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="s">&quot;ArialHebew&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span><span class="bp">UIFont</span><span class="p">.</span><span class="n">labelFontSize</span><span class="p">())</span>

<span class="c1">// 背景色</span>
<span class="n">label</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">grayColor</span><span class="p">()</span>

<span class="c1">// ラベルの領域にテキストが収まらない場合に、フォントを最大0.5倍まで縮小する</span>
<span class="n">label</span><span class="p">.</span><span class="n">adjustsFontSizeToFitWidth</span> <span class="p">=</span> <span class="kc">true</span>
<span class="n">label</span><span class="p">.</span><span class="n">minimumScaleFactor</span> <span class="p">=</span> <span class="mf">0.5</span>
</pre></div>


<h3 id="_11">フォントを変更</h3>
<!-- uifont:: -->

<div class="codehilite"><pre><span class="c1">// フォントを作成</span>
<span class="c1">// UIFont(name:,size:) か UIFontのフォント作成関数を使用する</span>

<span class="c1">// ヒラギノフォント</span>
<span class="bp">UIFont</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="s">&quot;HiraKakuProN-W3&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span><span class="bp">UIFont</span><span class="p">.</span><span class="n">labelFontSize</span><span class="p">())</span>

<span class="c1">// システムの標準フォントサイズ</span>
<span class="bp">UIFont</span><span class="p">.</span><span class="n">systemFontOfSize</span><span class="p">(</span><span class="bp">UIFont</span><span class="p">.</span><span class="n">systemFontSize</span><span class="p">())</span>

<span class="c1">// UIButton用のフォントサイズ</span>
<span class="bp">UIFont</span><span class="p">.</span><span class="n">systemFontOfSize</span><span class="p">(</span><span class="bp">UIFont</span><span class="p">.</span><span class="n">buttonFontSize</span><span class="p">())</span>

<span class="c1">// カスタムしたフォントサイズ(20)の</span>
<span class="bp">UIFont</span><span class="p">.</span><span class="n">systemFontOfSize</span><span class="p">(</span><span class="n">CGFloat</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

<span class="c1">// Italic System Font</span>
<span class="bp">UIFont</span><span class="p">.</span><span class="n">italicSystemFontOfSize</span><span class="p">(</span><span class="bp">UIFont</span><span class="p">.</span><span class="n">labelFontSize</span><span class="p">())</span>

<span class="c1">// Bold</span>
<span class="bp">UIFont</span><span class="p">.</span><span class="n">boldSystemFontOfSize</span><span class="p">(</span><span class="bp">UIFont</span><span class="p">.</span><span class="n">labelFontSize</span><span class="p">())</span>
</pre></div>


<h2 id="uiprogressview">UIProgressView</h2>
<p><!-- uiprogressview:: -->
進捗状態を 0~100%で表示するView</p>
<div class="codehilite"><pre><span class="c1">// 生成</span>
<span class="kd">let</span> <span class="nv">progress</span> <span class="p">=</span> <span class="bp">UIProgressView</span><span class="p">(</span><span class="n">progressViewStyle</span><span class="p">:</span> <span class="p">.</span><span class="n">Default</span><span class="p">)</span>

<span class="c1">// 座標、サイズ設定</span>
<span class="n">progress</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1">// バーの色を変更</span>
<span class="n">progress</span><span class="p">.</span><span class="n">progressTintColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">redColor</span><span class="p">()</span>

<span class="c1">// 進捗度(0.0~1.0)を設定</span>
<span class="n">progress</span><span class="p">.</span><span class="n">progress</span> <span class="p">=</span> <span class="mf">0.5</span>

<span class="c1">// サイズを変更</span>
<span class="n">progress</span><span class="p">.</span><span class="n">transform</span> <span class="p">=</span> <span class="n">CGAffineTransformMakeScale</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span>

<span class="c1">// 進捗をアニメーションで設定</span>
<span class="n">progress</span><span class="p">.</span><span class="n">setProgress</span><span class="p">(</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>


<h2 id="uipagecontrol">UIPageControl</h2>
<p><!-- uipagecontrol:: -->
現在のページを表示するView。
UIPageControl自体はシンプルで、複数の選択項目の位置の１つが選択された状態を保持するだけ。
選択項目が変更された時などに呼ばれるイベントを登録しておいてページの切り替えを実現する</p>
<div class="codehilite"><pre><span class="c1">// 生成</span>
<span class="kd">let</span> <span class="nv">pageControl</span> <span class="p">=</span> <span class="bp">UIPageControl</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>

<span class="c1">// ページ数</span>
<span class="n">pageControl</span><span class="p">.</span><span class="n">numberOfPages</span> <span class="p">=</span> <span class="mi">3</span>

<span class="c1">// 現在のページ</span>
<span class="n">pageControl</span><span class="p">.</span><span class="n">currentPage</span> <span class="p">=</span> <span class="mi">0</span>

<span class="c1">// 現在のページを示す●の色</span>
<span class="n">pageControl</span><span class="p">.</span><span class="n">currentPageIndicatorTintColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">yellowColor</span><span class="p">()</span>

<span class="c1">// ページを示す●の色</span>
<span class="n">pageControl</span><span class="p">.</span><span class="n">pageIndicatorTintColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">blueColor</span><span class="p">()</span>

<span class="c1">// ページが変更された時のイベントを登録</span>
<span class="n">pageControl</span><span class="p">.</span><span class="n">addTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">pageControlChanged</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">forControlEvents</span><span class="p">:</span> <span class="n">UIControlEvents</span><span class="p">.</span><span class="n">ValueChanged</span><span class="p">)</span>

<span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">pageControl</span><span class="p">)</span>

<span class="c1">// ページが変更された時の処理</span>
<span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">pageControlChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">pageControl</span> <span class="p">=</span> <span class="n">sender</span> <span class="kc">as</span><span class="p">?</span> <span class="bp">UIPageControl</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">pageControl</span><span class="p">.</span><span class="n">currentPage</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h2 id="uipickerview">UIPickerView</h2>
<p><!-- pickerview:: -->
ドラムロール式の項目選択View。複数のドラムロールを持たせることも可能<br>
<img alt="UIPickerView" src="http://sunsunsoft.com/image/ios/pickerview.png"></p>
<p>deleteを使用して実現しているのでサンプルのボリュームが大きい。以下のプロジェクトを参照する。<br>
<a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/UIViewTest/UIViewTest/ViewController/PickerViewController.swift">github: PickerViewController.swift</a></p>
<table>
<thead>
<tr>
<th>プロパティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>selectedRowInComponent(component: Int) -&gt; Int</td>
<td>指定セクションの選択番号を取得</td>
</tr>
</tbody>
</table>
<p><strong>テンプレート</strong></p>
<div class="codehilite"><pre><span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="bp">UIViewController</span><span class="p">,</span> <span class="bp">UIPickerViewDelegate</span><span class="p">,</span> <span class="bp">UIPickerViewDataSource</span> <span class="p">{</span>

    <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">picker1</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">!</span>

    <span class="kd">private</span> <span class="kd">let</span> <span class="nv">pickerTitles</span><span class="p">:</span> <span class="bp">NSArray</span> <span class="p">=</span> <span class="p">[</span>
        <span class="s">&quot;hoge1&quot;</span><span class="p">,</span><span class="s">&quot;hoge2&quot;</span><span class="p">,</span> <span class="s">&quot;hoge3&quot;</span><span class="p">,</span> <span class="s">&quot;hoge4&quot;</span>
    <span class="p">]</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="n">picker1</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>
        <span class="n">picker1</span><span class="p">.</span><span class="n">dataSource</span> <span class="p">=</span> <span class="kc">self</span>
    <span class="p">}</span>

    <span class="c1">// </span><span class="cs">MARK:</span><span class="c1"> UIPickerViewDataSource</span>
    <span class="c1">// pickerに表示する列数を返すデータソースメソッド.</span>
    <span class="c1">// (実装必須)</span>
    <span class="kd">func</span> <span class="nf">numberOfComponentsInPickerView</span><span class="p">(</span><span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="p">}</span>

    <span class="c1">//pickerに表示する行数を返すデータソースメソッド.</span>
    <span class="c1">// (実装必須)</span>
    <span class="kd">func</span> <span class="nf">pickerView</span><span class="p">(</span><span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">,</span> <span class="n">numberOfRowsInComponent</span> <span class="n">component</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">pickerTitles</span><span class="p">.</span><span class="bp">count</span>
    <span class="p">}</span>

    <span class="c1">// </span><span class="cs">MARK:</span><span class="c1"> UIPickerViewDelegate</span>
    <span class="c1">// pickerに表示する値を返すデリゲートメソッド.</span>
    <span class="kd">func</span> <span class="nf">pickerView</span><span class="p">(</span><span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">,</span> <span class="n">titleForRow</span> <span class="n">row</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">forComponent</span> <span class="n">component</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span><span class="p">?</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">pickerTitles</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="kc">as</span><span class="p">?</span> <span class="nb">String</span>
    <span class="p">}</span>

    <span class="c1">// pickerが選択された際に呼ばれるデリゲートメソッド.</span>
    <span class="kd">func</span> <span class="nf">pickerView</span><span class="p">(</span><span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">,</span> <span class="n">didSelectRow</span> <span class="n">row</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">inComponent</span> <span class="n">component</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;row: </span><span class="si">\(</span><span class="n">row</span><span class="si">)</span><span class="se">\n</span><span class="s"> value: </span><span class="si">\(</span><span class="n">pickerTitles</span><span class="p">[</span><span class="n">row</span><span class="p">]</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h2 id="uisegmentedcontrol">UISegmentedControl</h2>
<p>複数の選択項目のうち１つだけ選択できるコントロール</p>
<p><img alt="UISegmentedControl" src="http://sunsunsoft.com/image/ios/segment.png"></p>
<div class="codehilite"><pre><span class="c1">// 生成</span>
<span class="c1">// 表示する項目のリストを渡して生成</span>
<span class="kd">let</span> <span class="nv">segmented</span> <span class="p">=</span> <span class="bp">UISegmentedControl</span><span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;山形&quot;</span><span class="p">,</span><span class="s">&quot;宮城&quot;</span><span class="p">,</span><span class="s">&quot;福島&quot;</span><span class="p">])</span>

<span class="c1">// 座標を設定</span>
<span class="n">segmented</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

<span class="c1">// 最初に選択されている項目</span>
<span class="n">segmented</span><span class="p">.</span><span class="n">selectedSegmentIndex</span> <span class="p">=</span> <span class="mi">0</span>

<span class="c1">// 色(ボタンの枠や文字)</span>
<span class="n">segmented</span><span class="p">.</span><span class="n">tintColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">redColor</span><span class="p">()</span>

<span class="c1">// 値が変わった時のイベントを登録</span>
<span class="n">segmented</span><span class="p">.</span><span class="n">addTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">segmentedValueChanged</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">forControlEvents</span><span class="p">:</span> <span class="n">UIControlEvents</span><span class="p">.</span><span class="n">ValueChanged</span><span class="p">)</span>
</pre></div>


<p>自前の画像でカスタマイズしたい場合は
<a href="https://moto44blog.wordpress.com/2013/01/11/uisegmentedcontrol%E3%82%92%E3%82%AA%E3%83%AA%E3%82%B8%E3%83%8A%E3%83%AB%E3%81%AE%E5%A4%96%E8%A6%B3%E3%81%AB%E3%81%97%E3%82%88%E3%81%86/">UISEGMENTEDCONTROLをオリジナルの外観にしよう</a></p>
<h2 id="uislider">UISlider</h2>
<p>値をスライドして調整するコントロール。</p>
<div class="codehilite"><pre><span class="c1">// UISliderを生成</span>
<span class="kd">let</span> <span class="nv">slider</span> <span class="p">=</span> <span class="bp">UISlider</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
<span class="c1">// 色を設定</span>
<span class="n">slider</span><span class="p">.</span><span class="n">tintColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">redColor</span><span class="p">()</span>

<span class="c1">// 識別用のタグを設定</span>
<span class="n">slider</span><span class="p">.</span><span class="n">tag</span> <span class="p">=</span> <span class="mi">2</span>

<span class="c1">// スライダーの最大値</span>
<span class="n">slider</span><span class="p">.</span><span class="n">maximumValue</span> <span class="p">=</span> <span class="mi">100</span>

<span class="c1">// 値変更の通知タイミング(true: スライド中も通知 / false:スライド中は通知しない)</span>
<span class="n">slider</span><span class="p">.</span><span class="n">continuous</span> <span class="p">=</span> <span class="kc">false</span>

<span class="c1">// 値が変更された時のイベントを設定</span>
<span class="n">slider</span><span class="p">.</span><span class="n">addTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">sliderValueChanged</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">forControlEvents</span><span class="p">:</span> <span class="p">.</span><span class="n">ValueChanged</span><span class="p">)</span>

<span class="c1">// スライド時のイベント処理</span>
<span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">sliderValueChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">slider</span> <span class="p">=</span> <span class="n">sender</span> <span class="kc">as</span><span class="p">?</span> <span class="bp">UISlider</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">slider</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h2 id="uiswitch">UISwitch</h2>
<p><!-- uiswitch:: -->
On/Offの２つの状態をもつコントロール</p>
<div class="codehilite"><pre>// UISwitchを生成
let _switch = UISwitch(frame: CGRectMake(0, 0, 100, 30))

// Offの時の背景色
_switch.tintColor = .grayColor()

// Onの時の背景色
_switch.onTintColor = .blueColor()

// ●の色
_switch.thumbTintColor = .yellowColor()

// 初期状態(OFF)
_switch.on = false

 // 値が変更された時のイベント追加
_switch.addTarget(self, action: #selector(self.switchValueChanged(_:)), forControlEvents: .ValueChanged)
</pre></div>


<h2 id="uistepper">UIStepper</h2>
<p><!-- uistepper:: -->
値の増減を管理するコントロール。最小値、最大値、一回の増減幅を設定できる。</p>
<div class="codehilite"><pre><span class="c1">// UIStepper生成</span>
<span class="kd">let</span> <span class="nv">stepper</span> <span class="p">=</span> <span class="bp">UIStepper</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
<span class="c1">// 最小値</span>
<span class="n">stepper</span><span class="p">.</span><span class="n">minimumValue</span> <span class="p">=</span> <span class="mf">0.0</span>
<span class="c1">// 最大値</span>
<span class="n">stepper</span><span class="p">.</span><span class="n">maximumValue</span> <span class="p">=</span> <span class="mf">100.0</span>
<span class="c1">// 増減幅</span>
<span class="n">stepper</span><span class="p">.</span><span class="n">stepValue</span> <span class="p">=</span> <span class="mf">1.0</span>
<span class="c1">// 現在の値</span>
<span class="n">stepper</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="mf">0.0</span>
<span class="c1">// 色</span>
<span class="n">stepper</span><span class="p">.</span><span class="n">tintColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">redColor</span><span class="p">()</span>
<span class="c1">// 値変更時のイベント登録</span>
<span class="n">stepper</span><span class="p">.</span><span class="n">addTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">stepperValueChanged</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">forControlEvents</span><span class="p">:</span> <span class="p">.</span><span class="n">ValueChanged</span><span class="p">)</span>
</pre></div>


<h2 id="uitextfield">UITextField</h2>
<p>１行テキスト入力欄のコントロール。タップするとキーボードが出現して、それを使ってテキストを入力できる。</p>
<div class="codehilite"><pre><span class="c1">// 生成</span>
<span class="kd">let</span> <span class="nv">textField</span> <span class="p">=</span> <span class="bp">UITextField</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<span class="c1">// テキスト</span>
<span class="n">textField</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;&quot;</span>

<span class="c1">// プレースホルダー（文字が入力されていない時に表示されるテキスト）</span>
<span class="n">textField</span><span class="p">.</span><span class="n">placeholder</span> <span class="p">=</span> <span class="s">&quot;入力するなり&quot;</span>

<span class="c1">// キーボードのタイプ</span>
<span class="cm">/*</span>
<span class="cm">  .keyboardTypeプロパティに UIKeyboardType の値を設定する</span>
<span class="cm">  .Default：デフォルト</span>
<span class="cm">  .ASCIICapable：英字</span>
<span class="cm">  .NumbersAndPunctuation：数字・記号</span>
<span class="cm">  .URL：URL用</span>
<span class="cm">  .EmailAddress：Email用</span>
<span class="cm">  .NumberPad：テンキー</span>
<span class="cm">  .PhonePad：電話番号用</span>
<span class="cm">*/</span>
<span class="n">textField</span><span class="p">.</span><span class="n">keyboardType</span> <span class="p">=</span> <span class="p">.</span><span class="n">Default</span>

<span class="c1">// キーボードのReturnキーの表示</span>
<span class="cm">/* .returnKeyTypeプロパティに UIReturnKeyType の値を設定する</span>
<span class="cm"> .Default：デフォルト(「return」)</span>
<span class="cm"> .Go：「Go」</span>
<span class="cm"> .Join：「Join」</span>
<span class="cm"> .Next：「Next」</span>
<span class="cm"> .Route：「Route」</span>
<span class="cm"> .Search：「Search」</span>
<span class="cm"> .Send：「Send」</span>
<span class="cm"> .Done：「Done」</span>
<span class="cm"> .EmergencyCall：「EmergencyCall」</span>
<span class="cm">*/</span>
<span class="n">textField</span><span class="p">.</span><span class="n">returnKeyType</span> <span class="p">=</span> <span class="p">.</span><span class="n">Done</span>

<span class="c1">// フォントを設定</span>
<span class="n">textField</span><span class="p">.</span><span class="n">font</span> <span class="p">=</span> <span class="bp">UIFont</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="s">&quot;HiraKakuProN-W3&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span><span class="bp">UIFont</span><span class="p">.</span><span class="n">labelFontSize</span><span class="p">())</span>

<span class="c1">// テキストの色</span>
<span class="n">textField</span><span class="p">.</span><span class="n">textColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">blackColor</span><span class="p">()</span>

<span class="c1">// 枠のスタイル　(None, Line, Bezel, RoundedRect)</span>
<span class="n">textField</span><span class="p">.</span><span class="n">borderStyle</span> <span class="p">=</span> <span class="p">.</span><span class="n">RoundedRect</span>

<span class="c1">// テキストの寄せる方向 (Left, Right, Center)</span>
<span class="n">textField</span><span class="p">.</span><span class="n">textAlignment</span> <span class="p">=</span> <span class="p">.</span><span class="n">Left</span>

<span class="c1">// クリアボタン (Never, Always, WhileEditing, UnlessEditing)</span>
<span class="n">textField</span><span class="p">.</span><span class="n">clearButtonMode</span> <span class="p">=</span> <span class="p">.</span><span class="n">UnlessEditing</span>

<span class="c1">// デリゲートを指定（通常ViewControllerで処理するのでself)</span>
<span class="n">textField</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>


<span class="c1">// 以下UITextFieldDelegateメソッド</span>
<span class="c1">// textField   テキストフィールドを編集する直前に呼び出される</span>
<span class="kd">func</span> <span class="nf">textFieldShouldBeginEditing</span><span class="p">(</span><span class="n">textField</span> <span class="p">:</span> <span class="bp">UITextField</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
<span class="p">{</span><span class="k">return</span> <span class="kc">true</span><span class="p">}</span>

<span class="c1">// テキストフィールドの編集が終了する直前に呼び出される</span>
<span class="c1">// ret:</span>
<span class="kd">func</span> <span class="nf">textFieldShouldEndEditing</span><span class="p">(</span><span class="n">textField</span> <span class="p">:</span> <span class="bp">UITextField</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
<span class="p">{</span><span class="k">return</span> <span class="kc">true</span><span class="p">}</span>

<span class="c1">// テキストフィールドを編集する直後に呼び出される</span>
<span class="kd">func</span> <span class="nf">textFieldDidBeginEditing</span><span class="p">(</span><span class="n">textField</span><span class="p">:</span> <span class="bp">UITextField</span><span class="p">){}</span>
<span class="p">{</span>
<span class="c1">// textField    テキストフィールドの編集が終了する直後に呼び出される</span>
<span class="kd">func</span> <span class="nf">textFieldDidEndEditing</span><span class="p">(</span><span class="n">textField</span><span class="p">:</span> <span class="bp">UITextField</span><span class="p">){}</span>

<span class="c1">// textField    Returnボタンがタップされた時に呼ばれる</span>
<span class="kd">func</span> <span class="nf">textFieldShouldReturn</span><span class="p">(</span><span class="n">textField</span><span class="p">:</span> <span class="bp">UITextField</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
<span class="p">{</span>
    <span class="c1">// キーボードを閉じる</span>
    <span class="n">textField</span><span class="p">.</span><span class="n">resignFirstResponder</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="c1">// textField    クリアボタンがタップされた時に呼ばれる</span>
<span class="c1">// 自動でクリアしたい場合はtrueを返す（ただし、自動クリア時はキーボードが立ち上がる）</span>
<span class="kd">func</span> <span class="nf">textFieldShouldClear</span><span class="p">(</span><span class="n">textField</span><span class="p">:</span> <span class="bp">UITextField</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
<span class="p">{</span>
    <span class="c1">// 自前でテキストをクリアする</span>
    <span class="n">textField</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">false</span>
<span class="p">}</span>
</pre></div>


<h2 id="uiwebview">UIWebView</h2>
<p><!-- uiwebview -->
Webページを表示するコントロール。</p>
<h3 id="http">httpのページを読み込む方法</h3>
<p>iOS9からセキュリティの関係でデフォルトの設定ではhttpのページが読めなくなった(httpsはOK)
httpを読み込むにはプロジェクトのInfo.plistに以下の設定を追加してやる</p>
<p>//  ATS(App Transport Security Settings)を無効
<img alt="ボタン" src="http://sunsunsoft.com/image/ios/info_ats.png"></p>
<div class="codehilite"><pre>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
</pre></div>


<h3 id="_12">サンプル</h3>
<div class="codehilite"><pre><span class="c1">// 生成</span>
<span class="kd">let</span> <span class="nv">webView</span> <span class="p">=</span> <span class="bp">UIWebView</span><span class="p">()</span>

<span class="c1">// サイズを設定</span>
<span class="n">webView</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1">// デリゲートを設定</span>
<span class="n">webView</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>

<span class="c1">// ページ読み込み(任天堂のホームページ)</span>
<span class="c1">// 適当なWebページを表示してみる</span>
<span class="kd">let</span> <span class="nv">requestURL</span> <span class="p">=</span> <span class="bp">NSURL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s">&quot;http://www.nintendo.co.jp&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">req</span> <span class="p">=</span> <span class="bp">NSURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="p">:</span> <span class="n">requestURL</span><span class="p">!)</span>
<span class="n">webView</span><span class="p">.</span><span class="n">loadRequest</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>


<span class="c1">// デリゲートメソッド(UIWebViewDelegate)</span>

<span class="c1">// ページの読み込みリクエストを受け取った時の処理</span>
<span class="c1">// trueを返すとリクエストのページを読み込む</span>
<span class="kd">func</span> <span class="nf">webView</span><span class="p">(</span><span class="n">webView</span><span class="p">:</span> <span class="bp">UIWebView</span><span class="p">,</span> <span class="n">shouldStartLoadWithRequest</span> <span class="n">request</span><span class="p">:</span> <span class="bp">NSURLRequest</span><span class="p">,</span> <span class="n">navigationType</span><span class="p">:</span> <span class="n">UIWebViewNavigationType</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="c1">// ページ読み込み完了時の処理</span>
<span class="kd">func</span> <span class="nf">webViewDidFinishLoad</span><span class="p">(</span><span class="n">webView</span><span class="p">:</span> <span class="bp">UIWebView</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>


<h3 id="uiwebview_1">UIWebViewプロパティ</h3>
<table>
<thead>
<tr>
<th>プロパティ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>delegate</td>
<td>デリゲートを設定する</td>
</tr>
<tr>
<td>scalesPageToFit (boolean)</td>
<td>ピンチイン／アウトの可否を設定する</td>
</tr>
<tr>
<td>loading (boolean)</td>
<td>ページ読み込み中かどうか</td>
</tr>
<tr>
<td>canGoBack (boolean)</td>
<td>前のページに戻れるかどうか</td>
</tr>
<tr>
<td>canGoForward (boolean)</td>
<td>次のページに進めるかどうか</td>
</tr>
</tbody>
</table>
<h3 id="uiwebview_2">UIWebViewメソッド</h3>
<p>loadRequest(NSURLRequest) | 指定したページを読み込む
goBack() | 前のページに戻る
goForward() | 次のページに進む
reload() | リロードする
stopLoading() | ページの読込を中止する</p>
<h2 id="uibutton">UIButton</h2>
<!-- uibutton:: -->

<h3 id="_13">リンク</h3>
<p>ハイライト時のBG色を設定する方法。直接色を指定できないのでUIColorからUIImageを作成して設定する。<br>
<a href="http://qiita.com/akatsuki174/items/c0b8b5126b6c12f62001">UIButtonハイライト時の色を指定する</a></p>
<h3 id="_14">ボタン生成のサンプル</h3>
<div class="codehilite"><pre><span class="kd">func</span> <span class="nf">createSimpleButton</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ボタン生成。デフォルトの色はテキストの色が白で背景が透明なので、背景が白の場合はテキストの色を変更すること</span>
    <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="bp">UIButton</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
    <span class="n">button</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">forState</span><span class="p">:</span> <span class="n">UIControlState</span><span class="p">.</span><span class="n">Normal</span><span class="p">)</span>
    <span class="n">button</span><span class="p">.</span><span class="n">setTitleColor</span><span class="p">(</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">grayColor</span><span class="p">(),</span> <span class="n">forState</span><span class="p">:</span> <span class="n">UIControlState</span><span class="p">.</span><span class="n">Highlighted</span><span class="p">)</span>

    <span class="c1">// 押された時の処理</span>
    <span class="n">button</span><span class="p">.</span><span class="n">addTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">buttonTapped</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">forControlEvents</span><span class="p">:</span> <span class="p">.</span><span class="n">TouchUpInside</span><span class="p">)</span>

    <span class="c1">// addSubview</span>
    <span class="n">view1</span><span class="p">!.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p>いろいろカスタマイズしたボタン<br>
<img alt="ボタン" src="http://sunsunsoft.com/image/ios/button1.png"></p>
<div class="codehilite"><pre><span class="kd">func</span> <span class="nf">createButton</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="bp">UIButton</span><span class="p">()</span>
    <span class="c1">//表示されるテキスト</span>
    <span class="n">button</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s">&quot;Tap Me!&quot;</span><span class="p">,</span> <span class="n">forState</span><span class="p">:</span> <span class="p">.</span><span class="n">Normal</span><span class="p">)</span>

    <span class="c1">//テキストの色</span>
    <span class="n">button</span><span class="p">.</span><span class="n">setTitleColor</span><span class="p">(</span><span class="bp">UIColor</span><span class="p">.</span><span class="n">blueColor</span><span class="p">(),</span> <span class="n">forState</span><span class="p">:</span> <span class="p">.</span><span class="n">Normal</span><span class="p">)</span>

    <span class="c1">//タップした状態のテキスト</span>
    <span class="n">button</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s">&quot;Tapped!&quot;</span><span class="p">,</span> <span class="n">forState</span><span class="p">:</span> <span class="p">.</span><span class="n">Highlighted</span><span class="p">)</span>

    <span class="c1">//タップした状態の色</span>
    <span class="n">button</span><span class="p">.</span><span class="n">setTitleColor</span><span class="p">(</span><span class="bp">UIColor</span><span class="p">.</span><span class="n">redColor</span><span class="p">(),</span> <span class="n">forState</span><span class="p">:</span> <span class="p">.</span><span class="n">Highlighted</span><span class="p">)</span>

    <span class="c1">//サイズ</span>
    <span class="n">button</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

    <span class="c1">//タグ番号</span>
    <span class="n">button</span><span class="p">.</span><span class="n">tag</span> <span class="p">=</span> <span class="mi">1</span>

    <span class="c1">//配置場所</span>
    <span class="n">button</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="bp">CGPoint</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">100</span><span class="p">)</span>

    <span class="c1">//背景色</span>
    <span class="n">button</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">(</span><span class="n">red</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">green</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">blue</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">)</span>

    <span class="c1">//角丸</span>
    <span class="n">button</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">cornerRadius</span> <span class="p">=</span> <span class="mi">10</span>

    <span class="c1">//ボーダー幅</span>
    <span class="n">button</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">borderWidth</span> <span class="p">=</span> <span class="mi">1</span>

    <span class="c1">//ボタンをタップした時に実行するメソッドを指定</span>
    <span class="n">button</span><span class="p">.</span><span class="n">addTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="s">&quot;tapped:&quot;</span><span class="p">,</span> <span class="n">forControlEvents</span><span class="p">:.</span><span class="n">TouchUpInside</span><span class="p">)</span>

    <span class="c1">//viewにボタンを追加する</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<h3 id="_15">ボタンのテキストを変更する</h3>
<p><code>button3.setTitle("ほげ", forState:UIControlState.Normal)</code>
forStateに設定できる状態</p>
<table>
<thead>
<tr>
<th>値</th>
<th>状態</th>
</tr>
</thead>
<tbody>
<tr>
<td>UIControlState.Normal</td>
<td>通常状態(有効状態で、ボタンが押されていない時)</td>
</tr>
<tr>
<td>UIControlState.Highlighted</td>
<td>ハイライト(ボタンを押した時)の状態</td>
</tr>
<tr>
<td>UIControlState.Disabled</td>
<td>無効状態 .enabled == false</td>
</tr>
<tr>
<td>UIControlState.Selected</td>
<td>選択状態 .selected == true</td>
</tr>
</tbody>
</table>
<p><img alt="ButtonState" src="http://i.stack.imgur.com/DDpb2.png"></p>
<h2 id="uiimageview">UIImageView</h2>
<!-- uiimageview:: -->

<p>画像(UIImage)から生成</p>
<div class="codehilite"><pre><span class="c1">// プロジェクトに追加された画像 &quot;hoge.png&quot; から生成する</span>
<span class="kd">let</span> <span class="nv">imageView</span> <span class="p">=</span> <span class="bp">UIImageView</span><span class="p">(</span> <span class="n">image</span><span class="p">:</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">&quot;hoge.png&quot;</span><span class="p">)</span> <span class="p">)</span>
<span class="n">imageView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span> <span class="p">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">)</span>
</pre></div>


<p>自前でUIImageViewを生成</p>
<div class="codehilite"><pre><span class="c1">// 自前のUIImageを作成して、それを元にUIImageViewを作成する</span>
<span class="kd">func</span> <span class="nf">createImageView2</span><span class="p">(</span><span class="n">pos</span> <span class="p">:</span> <span class="bp">CGPoint</span><span class="p">,</span> <span class="n">size</span> <span class="p">:</span> <span class="bp">CGSize</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UIImageView</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nv">imgView</span><span class="p">:</span><span class="bp">UIImageView</span><span class="p">!</span> <span class="p">=</span> <span class="kc">nil</span>
    <span class="kd">var</span> <span class="nv">img</span><span class="p">:</span><span class="bp">UIImage</span><span class="p">!</span> <span class="p">=</span> <span class="kc">nil</span>

    <span class="c1">// ここでRGBAの値を指定(今回は適当に青色にしています)</span>
    <span class="kd">let</span> <span class="nv">r</span><span class="p">:</span><span class="nb">Int</span> <span class="p">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">g</span><span class="p">:</span><span class="nb">Int</span> <span class="p">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="nb">Int</span> <span class="p">=</span> <span class="mi">255</span>
    <span class="kd">let</span> <span class="nv">alphaValue</span><span class="p">:</span><span class="n">CGFloat</span> <span class="p">=</span> <span class="mf">1.0</span>

    <span class="c1">// UIImageViewを準備(iPadの横向きにフルで取ったとした場合．ご自身の要件に合わせて下さい．)</span>
    <span class="n">imgView</span> <span class="p">=</span> <span class="bp">UIImageView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">))</span>

    <span class="c1">// UIImageを自前で準備</span>
    <span class="n">UIGraphicsBeginImageContextWithOptions</span><span class="p">(</span><span class="n">imgView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1">// context生成</span>
    <span class="kd">let</span> <span class="nv">contextImg</span><span class="p">:</span><span class="n">CGContextRef</span> <span class="p">=</span> <span class="n">UIGraphicsGetCurrentContext</span><span class="p">()</span><span class="o">!</span>
    <span class="c1">// この塗りつぶす領域の大きさを指定</span>
    <span class="kd">let</span> <span class="nv">rect</span><span class="p">:</span><span class="bp">CGRect</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>
    <span class="c1">//　色をRGBAで指定</span>
    <span class="n">CGContextSetRGBFillColor</span><span class="p">(</span><span class="n">contextImg</span><span class="p">,</span><span class="n">CGFloat</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span><span class="n">CGFloat</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span><span class="n">CGFloat</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span> <span class="n">alphaValue</span><span class="p">)</span>
    <span class="c1">// 指定された領域を塗りつぶす</span>
    <span class="n">CGContextFillRect</span><span class="p">(</span><span class="n">contextImg</span><span class="p">,</span> <span class="n">rect</span><span class="p">)</span>
    <span class="c1">//　現在のcontextの情報取得</span>
    <span class="n">img</span> <span class="p">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">()</span>
    <span class="c1">//　contextを終了</span>
    <span class="n">UIGraphicsEndImageContext</span><span class="p">()</span>

    <span class="c1">// imgをUIImageViewで表示</span>
    <span class="n">imgView</span><span class="p">.</span><span class="n">image</span> <span class="p">=</span> <span class="n">img</span>
    <span class="n">imgView</span><span class="p">.</span><span class="n">image</span><span class="p">?.</span><span class="n">drawInRect</span><span class="p">(</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">imgView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">imgView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">imgView</span>
<span class="p">}</span>
</pre></div>


<h3 id="_16">ステータスバーを非表示にする</h3>
<p>UIViewControllerクラスに以下のメソッドを追加</p>
<div class="codehilite"><pre><span class="kr">override</span> <span class="kd">func</span> <span class="nf">prefersStatusBarHidden</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>


<h1 id="nib">nib</h1>
<!-- nib:: xib:: -->

<p>自前のnibファイルからUIView(とそのサブクラス)を生成する方法</p>
<p><a href="http://qiita.com/iKichiemon/items/3cfa6c2bf2a0acb299a0">[Swift]xibファイルを呼び出す最も簡単な方法</a></p>
<h3 id="_17">サンプル</h3>
<p><a href="https://github.com/seafield1979/ios_programing/tree/develop/swift/NibTest/NibTest">GitHub NibText</a><br>
※サンプルを見て確認するのが一番早い</p>
<div class="codehilite"><pre><span class="c1">// MyView.xibからViewを生成する</span>
<span class="kd">let</span> <span class="nv">myView</span> <span class="p">=</span> <span class="bp">UINib</span><span class="p">(</span><span class="n">nibName</span><span class="p">:</span> <span class="s">&quot;MyView&quot;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">).</span><span class="n">instantiateWithOwner</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="kc">as</span><span class="p">!</span> <span class="bp">UIView</span>
<span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">myView</span><span class="p">)</span>
</pre></div>


<h3 id="_18">メモ</h3>
<ul>
<li>UIViewのサブクラスのソースを作成(-&gt;CustomViewとか)</li>
<li>xibファイルを作成する(CustomView.xibとか)</li>
<li>
<p>xib編集</p>
<ul>
<li>ファイルオーナーにCustomViewを設定</li>
<li>メインのView以下にUIViewを追加。ボタンやラベル等の自前のViewを追加</li>
<li>CustomView.swiftにCustomView.xibからIBOutletやIBActionを追加</li>
<li>★autolayoutを削除する(削除しないと表示サイズがおかしくなる)</li>
</ul>
</li>
<li>
<p>CustomView.swift編集</p>
<ul>
<li>initの中で xib のviewを自身に追加(addSubview)する</li>
</ul>
</li>
<li>
<p>ViewController.swift</p>
<ul>
<li>CustomViewを生成、viewに追加する</li>
<li>CustomViewのIBOutlet、IBActionを設定</li>
</ul>
</li>
</ul>
<h1 id="gesture">ジェスチャー gesture</h1>
<h3 id="_19">ジェスチャーを追加する方法</h3>
<p>ソースコードだけで view1:UIView をタップした時の処理を追加。</p>
<div class="codehilite"><pre><span class="kd">class</span> <span class="nc">GestureViewController</span><span class="p">:</span> <span class="bp">UIViewController</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nv">gestureView</span> <span class="p">:</span> <span class="bp">UIView</span><span class="p">?</span>

    <span class="kd">func</span> <span class="nf">tapGesture</span><span class="p">(</span><span class="n">gestureRecognizer</span><span class="p">:</span> <span class="bp">UITapGestureRecognizer</span><span class="p">){</span>
        <span class="c1">// タップviewの色を変える (Red &lt;=&gt; Blue)</span>
        <span class="k">if</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">gestureView</span><span class="p">!.</span><span class="n">backgroundColor</span>  <span class="p">==</span> <span class="p">.</span><span class="n">redColor</span><span class="p">())</span> <span class="p">{</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">gestureView</span><span class="p">!.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">blueColor</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">gestureView</span><span class="p">!.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">redColor</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="p">}</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="c1">// Viewを追加</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">gestureView</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="bp">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span><span class="mi">100</span><span class="p">))</span>
        <span class="n">gestureView</span><span class="p">!.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">redColor</span><span class="p">()</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">gestureView</span><span class="p">!)</span>

        <span class="c1">// Viewにタッチイベントを追加</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">gestureView</span><span class="p">!.</span><span class="n">userInteractionEnabled</span> <span class="p">=</span> <span class="kc">true</span>

        <span class="c1">//ジェスチャーを作成</span>
        <span class="kd">let</span> <span class="nv">aSelector</span> <span class="p">=</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">tapGesture</span><span class="p">(</span><span class="kc">_</span><span class="p">:))</span>
        <span class="kd">let</span> <span class="nv">recognizer</span> <span class="p">:</span> <span class="bp">UITapGestureRecognizer</span> <span class="p">=</span> <span class="bp">UITapGestureRecognizer</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span><span class="n">aSelector</span><span class="p">);</span>

        <span class="c1">//ジェスチャーをUIViewオブジェクトに登録する</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">gestureView</span><span class="p">!.</span><span class="n">addGestureRecognizer</span><span class="p">(</span><span class="n">recognizer</span><span class="p">)</span>

    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="_20">ジェスチャーの種類</h3>
<h4 id="uitapgesturerecognizer">UITapGestureRecognizer (タップ)</h4>
<div class="codehilite"><pre>プロパティ
numberOfTapsRequired  最小、何本指でタップした時に反応するか
numberOfTouchesRequired  最大、何本指でタップした時に反応するか
</pre></div>


<h4 id="uiswipegesturerecognizer">UISwipeGestureRecognizer (スワイプ)</h4>
<div class="codehilite"><pre>numberOfTouchesRequired  最小、何本指で反応するか
direction   スワイプの方向
</pre></div>


<h4 id="uipinchgesturerecognizer">UIPinchGestureRecognizer (ピンチイン＆アウト)</h4>
<div class="codehilite"><pre>scale   ピンチイン、アウトの拡大率。ピンチインはマイナスの値、ピンチアウトは正の値
velocity   加速度
</pre></div>


<h4 id="uilongpressgesturerecognizer">UILongPressGestureRecognizer (長押し)</h4>
<p>長押しを検出する。長押し時のドラッグや長押し終了時にもイベントが発生する</p>
<div class="codehilite"><pre>state : UIGestureRecognizerState  状態
numberOfTapsRequired   最小何本指のタップで反応するか
numberOfTouchesRequired  最小何本指のタッチで反応するか(move時)
minimumPressDuration   長押しの反応時間(デフォルトは 0.5秒)
allowableMovement   長押し中の指のズレを許容する範囲
</pre></div>


<h4 id="uipangesturerecognizer">UIPanGestureRecognizer (ピン、ドラッグ)</h4>
<p>UIPanGestureRecognizer 
    minimumNumberOfTouches ドラッグ判定される最小の指の数
    maximumNumberOfTouches ドラッグ判定される最大の指の数
    func translationInView ドラッグの移動量を取得。クリアしない場合はドラッグ開始位置からの差分を返す
    func setTranslation  ドラッグ位置をセットする。CGPointZeroでクリアすると毎フレームの移動量が取得できるようになる
    func velocityInView  １秒あたりの移動量(ピクセル)</p>
<h1 id="selector">セレクタ selector</h1>
<p>セレクタは変数に入れられる関数、のようなもの。コンソールのswiftではコンパイルエラーになったので使えないみたいだ。</p>
<div class="codehilite"><pre><span class="c1">// Swift2.2以降の書き方</span>
<span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="bp">UIButton</span><span class="p">(</span><span class="n">type</span><span class="p">:</span> <span class="p">.</span><span class="n">System</span><span class="p">)</span>
<span class="n">button</span><span class="p">.</span><span class="n">addTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="p">#</span><span class="n">selector</span><span class="p">(</span><span class="n">ViewController</span><span class="p">.</span><span class="n">buttonTapped</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">forControlEvents</span><span class="p">:</span> <span class="p">.</span><span class="n">TouchUpInside</span><span class="p">)</span>

<span class="kd">func</span> <span class="nf">buttonTapped</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="bp">UIButton</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Button Tapped</span>
<span class="p">}</span>
</pre></div>


<h1 id="storage">ストレージ storage</h1>
<p><!-- file::　storage::  -->
アプリを終了してもデータを保持できる仕組み</p>
<h2 id="github">GitHubサンプルプログラム</h2>
<table>
<thead>
<tr>
<th>ファイル名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/StorageTest/StorageTest/UserDefaultViewController.swift">UserDefaultViewController.swift</a></td>
<td>NSUserDefault</td>
</tr>
<tr>
<td><a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/StorageTest/StorageTest/FileManagerViewController.swift">FileManagerViewController.swift</a></td>
<td>FileManagerサンプル</td>
</tr>
<tr>
<td><a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/StorageTest/StorageTest/MemoStoreViewController.swift">MemoStoreViewController.swift</a></td>
<td>CoreDataサンプル</td>
</tr>
</tbody>
</table>
<h2 id="nsuserdefaults">NSUserDefaults</h2>
<!-- userdefault:: -->

<p>ちょっとした設定やフラグ等を手軽に保存する。</p>
<h3 id="_21">メソッドとか</h3>
<p>NSUserDefaults.standardUserDefaults() で取得したオブジェクトを使用して各種メソッドを呼び出す</p>
<div class="codehilite"><pre><span class="kd">let</span> <span class="nv">ud</span> <span class="p">=</span> <span class="bp">NSUserDefaults</span><span class="p">.</span><span class="n">standardUserDefaults</span><span class="p">()</span>
<span class="n">ud</span><span class="p">.</span><span class="n">setObject</span><span class="p">(</span><span class="s">&quot;babababa&quot;</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="s">&quot;key123&quot;</span><span class="p">)</span>
</pre></div>


<p><strong>設定系</strong></p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>setInteger(value : Int, forKey: String)</td>
<td>int型のデータを保存する</td>
</tr>
<tr>
<td>setFloat(value : Float, forKey: String)</td>
<td>float型のデータを保存する</td>
</tr>
<tr>
<td>setDouble(value : Double, forKey: String)</td>
<td>float型のデータを保存する</td>
</tr>
<tr>
<td>setBool(value : Bool, forKey: String)</td>
<td>float型のデータを保存する</td>
</tr>
<tr>
<td>setObject(value : AnyObject?, forKey: String)</td>
<td>String, Number, Array, Dictionary 等のデータを保存する</td>
</tr>
<tr>
<td>synchronize</td>
<td>保存する情報を即時に反映させる</td>
</tr>
</tbody>
</table>
<p><strong>取得系</strong></p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>integerForKey(defaultName: String) -&gt; Int</td>
<td>int型としてデータを読み込む</td>
</tr>
<tr>
<td>floatForKey(defaultName: String) -&gt; Float</td>
<td>float型としてデータを読み込む</td>
</tr>
<tr>
<td>doubleForKey(defaultName: String) -&gt; Double</td>
<td>double型としてデータを読み込む</td>
</tr>
<tr>
<td>boolForKey(defaultName: String) -&gt; Bool</td>
<td>BOOL型としてデータを読み込む</td>
</tr>
<tr>
<td>stringForKey(defaultName: String) -&gt; String?</td>
<td>String型としてデータを読み込む</td>
</tr>
<tr>
<td>arrayForKey(defaultName: String) -&gt; [AnyObject]?</td>
<td>Array型としてデータを読み込む</td>
</tr>
<tr>
<td>dataForKey(defaultName: String) -&gt; NSData?</td>
<td>NSData方を取得</td>
</tr>
</tbody>
</table>
<p><strong>その他</strong></p>
<table>
<thead>
<tr>
<th>メソッド</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>removeObjectForKey(defaultName: String)</td>
<td>データを削除する</td>
</tr>
<tr>
<td>dictionaryRepresentation() -&gt; [String : AnyObject]</td>
<td>全データを取得する</td>
</tr>
</tbody>
</table>
<h3 id="_22">サンプル</h3>
<div class="codehilite"><pre><span class="c1">// NSUserDefaultオブジェクト取得</span>
    <span class="kd">let</span> <span class="nv">ud</span> <span class="p">=</span> <span class="bp">NSUserDefaults</span><span class="p">.</span><span class="n">standardUserDefaults</span><span class="p">()</span>

<span class="c1">// 設定 key = value</span>
    <span class="kd">let</span> <span class="nv">key</span> <span class="p">=</span> <span class="s">&quot;hoge&quot;</span>
    <span class="kd">let</span> <span class="nv">value</span> <span class="p">=</span> <span class="s">&quot;12345&quot;</span>
    <span class="n">ud</span><span class="p">.</span><span class="n">setObject</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="n">key</span><span class="p">)</span>
    <span class="c1">// すぐにシステムに反映(ストレージに保存)</span>
    <span class="n">ud</span><span class="p">.</span><span class="n">synchronize</span><span class="p">()</span>

<span class="c1">// 取得(文字列)</span>
    <span class="kd">let</span> <span class="nv">key</span> <span class="p">=</span> <span class="s">&quot;hoge&quot;</span>
    <span class="kd">let</span> <span class="nv">str</span> <span class="p">=</span> <span class="n">ud</span><span class="p">.</span><span class="n">stringForKey</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="c1">// データの削除</span>
    <span class="n">ud</span><span class="p">.</span><span class="n">removeObjectForKey</span><span class="p">(</span><span class="s">&quot;hoge&quot;</span><span class="p">)</span>

<span class="c1">// 全値の取得＆表示</span>
    <span class="c1">// 設定値すべてを取得　※ システムで用意された設定値も出力される</span>
    <span class="kd">let</span> <span class="nv">dictionary</span> <span class="p">:</span> <span class="bp">NSDictionary</span> <span class="p">=</span>  <span class="n">ud</span><span class="p">.</span><span class="n">dictionaryRepresentation</span><span class="p">()</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">dictionary</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">obj</span> <span class="k">in</span> <span class="n">dictionary</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">value</span> <span class="p">=</span> <span class="n">obj</span><span class="p">.</span><span class="n">value</span>
        <span class="c1">//print(obj.key.dynamicType)</span>

        <span class="k">if</span> <span class="n">value</span> <span class="kc">is</span> <span class="bp">NSString</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">key</span><span class="p">.</span><span class="n">description</span> <span class="o">+</span> <span class="s">&quot;(NSString)&quot;</span><span class="p">)</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;    &quot;</span> <span class="o">+</span> <span class="n">value</span><span class="p">.</span><span class="n">description</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="n">value</span> <span class="kc">is</span> <span class="bp">NSArray</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">key</span><span class="p">.</span><span class="n">description</span> <span class="o">+</span> <span class="s">&quot;(NSArray)&quot;</span><span class="p">)</span>
            <span class="kd">let</span> <span class="nv">objv</span>  <span class="p">=</span> <span class="n">obj</span><span class="p">.</span><span class="n">value</span> <span class="kc">as</span><span class="p">?</span> <span class="bp">NSArray</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;{&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">obj2</span> <span class="k">in</span> <span class="n">objv</span><span class="p">!</span> <span class="p">{</span>
                <span class="bp">print</span><span class="p">(</span><span class="s">&quot;    &quot;</span> <span class="o">+</span> <span class="n">obj2</span><span class="p">.</span><span class="n">description</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;}&quot;</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="n">value</span> <span class="kc">is</span> <span class="nb">Int</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">key</span><span class="p">.</span><span class="n">description</span> <span class="o">+</span> <span class="s">&quot;(Int)&quot;</span><span class="p">)</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;    &quot;</span> <span class="o">+</span> <span class="n">value</span><span class="p">.</span><span class="n">description</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="kc">dynamicType</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>


<h2 id="coredata">CoreData</h2>
<p>いわゆるデータベース。データベースにテーブルを作成してそこにデータを読み書きする。大量のユーザー情報や商品情報などを保持するのに使用。</p>
<p><a href="http://qiita.com/mochizukikotaro/items/0355131c0df268454673">SwiftでCoreDataを使ってみる（Stepごとに解説）</a></p>
<p><a href="http://qiita.com/merrill/items/2a3588aa98cc64b5dea0">iOSアプリでデータベース（CoreData）を使う時に必要な知識をまとめてみた - Swift編 -</a></p>
<p>※注意点
一旦CoreDataを使うプログラムを実行した後にエンテティに変更を加える(カラム追加、削除等)と、次回実行時に<br>
NSEntityDescription.insertNewObjectForEntityForName<br>
を実行した時にアプリが落ちる。対処方法としては、エンティティに変更を加えたらアプリを一旦削除してから再実行する。すでにリリース済み等でアプリを削除できない場合はXCodeからCoreDataのバージョン移行を行う</p>
<h3 id="_23">プロジェクト準備</h3>
<h3 id="_24">検索の条件指定</h3>
<p><code>let predicate = NSPredicate(format: "name = %@", nameTextField.text!)</code>
のように検索条件を指定する際にオペレータ(上記では=の部分)に以下のものが指定できる。</p>
<table>
<thead>
<tr>
<th>オペレータ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>文字列完全一致</td>
</tr>
<tr>
<td>beginswith</td>
<td>先頭部分一致</td>
</tr>
<tr>
<td>endswith</td>
<td>末尾部分一致</td>
</tr>
<tr>
<td>like</td>
<td>正規表現</td>
</tr>
<tr>
<td>contains</td>
<td>文字列を含む</td>
</tr>
</tbody>
</table>
<div class="codehilite"><pre><span class="c1">// 例</span>
<span class="c1">// LIKE </span>
<span class="kd">let</span> <span class="nv">predicate</span> <span class="p">=</span> <span class="bp">NSPredicate</span><span class="p">(</span><span class="n">format</span><span class="p">:</span> <span class="s">&quot;name LIKE[c] %@&quot;</span><span class="p">,</span> <span class="n">_name</span><span class="p">)</span>
<span class="c1">// CONTAINS</span>
<span class="kd">let</span> <span class="nv">predicate</span> <span class="p">=</span> <span class="bp">NSPredicate</span><span class="p">(</span><span class="n">format</span><span class="p">:</span> <span class="s">&quot;name contains[c] %@&quot;</span><span class="p">,</span> <span class="n">_name</span><span class="p">)</span>
<span class="c1">// BEGINSWITH</span>
<span class="kd">let</span> <span class="nv">predicate</span> <span class="p">=</span> <span class="bp">NSPredicate</span><span class="p">(</span><span class="n">format</span><span class="p">:</span> <span class="s">&quot;name beginswith[c] %@&quot;</span><span class="p">,</span> <span class="n">_name</span><span class="p">)</span>
<span class="c1">// ENDSWITH</span>
<span class="kd">let</span> <span class="nv">predicate</span> <span class="p">=</span> <span class="bp">NSPredicate</span><span class="p">(</span><span class="n">format</span><span class="p">:</span> <span class="s">&quot;name endswith[c] %@&quot;</span><span class="p">,</span> <span class="n">_name</span><span class="p">)</span>
</pre></div>


<h2 id="nsfilemanager">NSFileManager</h2>
<p>ユーザーが作成したテキストや画像等を保存する。各アプリごとに用意されたDocuments以下にのファイルにしかアクセスできない。</p>
<p>↓わかりやすい説明、最初にここを読んでおくとよい<br>
<a href="http://qiita.com/nomunomu/items/69632904303cf6b762dd" target="_blank">NSFileManagerでAPP保存領域のデータを操作する</a></p>
<div class="codehilite"><pre>ディレクトリ構成
MyApp.app/
　┠ Document/ 
　│ 　┗ Inbox/
　┠ Library/
　│ 　┠ Caches/
　│ 　┗ Preferenses/
　┗ tmp/
</pre></div>


<h3 id="_25">サンプル</h3>
<div class="codehilite"><pre><span class="c1">// ファイル書き込み</span>
<span class="kd">let</span> <span class="nv">file_name</span> <span class="p">=</span> <span class="s">&quot;hoge.txt&quot;</span>
<span class="kd">let</span> <span class="nv">text</span> <span class="p">=</span> <span class="s">&quot;hogehoge&quot;</span>

<span class="c1">// Documentsフォルダパスを取得</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">dir</span> <span class="p">:</span> <span class="bp">NSString</span> <span class="p">=</span> <span class="n">NSSearchPathForDirectoriesInDomains</span><span class="p">(</span> <span class="n">NSSearchPathDirectory</span><span class="p">.</span><span class="n">DocumentDirectory</span><span class="p">,</span> <span class="n">NSSearchPathDomainMask</span><span class="p">.</span><span class="n">AllDomainsMask</span><span class="p">,</span> <span class="kc">true</span> <span class="p">).</span><span class="bp">first</span>
<span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">path_file_name</span> <span class="p">=</span> <span class="n">dir</span><span class="p">.</span><span class="n">stringByAppendingPathComponent</span><span class="p">(</span> <span class="n">file_name</span> <span class="p">)</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="c1">// ファイルに書き込む</span>
        <span class="n">try</span> <span class="n">text</span><span class="p">.</span><span class="n">writeToFile</span><span class="p">(</span> <span class="n">path_file_name</span><span class="p">,</span> <span class="n">atomically</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="n">NSUTF8StringEncoding</span> <span class="p">)</span>

    <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
        <span class="c1">//エラー処理</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="c1">//ファイル読み込み</span>
<span class="kd">let</span> <span class="nv">text</span> <span class="p">=</span> <span class="n">try</span><span class="p">!</span> <span class="bp">NSString</span><span class="p">(</span> <span class="n">contentsOfFile</span><span class="p">:</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="n">NSUTF8Str</span><span class="p">]</span><span class="n">ingEncoding</span> <span class="p">)</span>


<span class="c1">// ファイル削除</span>
<span class="n">try</span><span class="p">!</span> <span class="bp">NSFileManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">().</span><span class="n">removeItemAtPath</span><span class="p">(</span><span class="s">&quot;</span><span class="si">\(</span><span class="n">path</span><span class="si">)</span><span class="s">/</span><span class="si">\(</span><span class="n">fileName</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>


<span class="c1">// フォルダ作成</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">dir</span> <span class="p">=</span> <span class="n">NSSearchPathForDirectoriesInDomains</span><span class="p">(</span> <span class="n">NSSearchPathDirectory</span><span class="p">.</span><span class="n">DocumentDirectory</span><span class="p">,</span> <span class="n">NSSearchPathDomainMask</span><span class="p">.</span><span class="n">AllDomainsMask</span><span class="p">,</span> <span class="kc">true</span> <span class="p">).</span><span class="bp">first</span> <span class="kc">as</span> <span class="nb">String</span><span class="p">?</span>
<span class="p">{</span>
    <span class="kd">let</span> <span class="nv">createPath</span> <span class="p">=</span> <span class="n">dir</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">dirName</span>    <span class="c1">// 作成するディレクトリ名を含んだフルパス</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">try</span> <span class="bp">NSFileManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">().</span><span class="n">createDirectoryAtPath</span><span class="p">(</span><span class="n">createPath</span><span class="p">,</span> <span class="n">withIntermediateDirectories</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
        <span class="c1">// Faild to wite folder</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><br>
いろいろな処理のサンプル</p>
<div class="codehilite"><pre><span class="c1">// ファイル作成(バイナリ)</span>
<span class="kd">let</span> <span class="nv">writeData</span> <span class="p">=</span> <span class="s">&quot;hogehoge&quot;</span><span class="p">.</span><span class="n">dataUsingEncoding</span><span class="p">(</span><span class="n">NSUTF8StringEncoding</span><span class="p">)</span>
<span class="bp">NSFileManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">().</span><span class="n">createFileAtPath</span><span class="p">(</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">contents</span><span class="p">:</span> <span class="n">writeData</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>

<span class="c1">// ファイルの存在確認（ディレクトリも同じ）</span>
<span class="kd">let</span> <span class="nv">result</span> <span class="p">=</span> <span class="bp">NSFileManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">().</span><span class="n">fileExistsAtPath</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>

<span class="c1">// ファイルの削除（ディレクトリも同じ）</span>
<span class="n">try</span><span class="p">!</span> <span class="bp">NSFileManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">().</span><span class="n">removeItemAtPath</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>

<span class="c1">// ファイルの移動（ディレクトリも同じ）</span>
<span class="n">try</span><span class="p">!</span> <span class="bp">NSFileManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">().</span><span class="n">moveItemAtPath</span><span class="p">(</span><span class="n">srcPath</span><span class="p">,</span> <span class="n">toPath</span><span class="p">:</span> <span class="n">dstPath</span><span class="p">)</span>

<span class="c1">// ファイルのコピー（ディレクトリも同じ）</span>
<span class="n">result</span> <span class="p">=</span> <span class="p">[</span><span class="n">fm</span> <span class="n">copyItemAtPath</span><span class="p">:</span> <span class="n">src</span> <span class="n">toPath</span><span class="p">:</span><span class="n">dst</span> <span class="n">error</span><span class="p">:&amp;</span><span class="n">error</span><span class="p">];</span>

<span class="c1">// ディレクトリの作成</span>
<span class="n">result</span> <span class="p">=</span> <span class="p">[</span><span class="n">fm</span> <span class="n">createDirectoryAtPath</span><span class="p">:</span><span class="n">path</span> <span class="n">withIntermediateDirectories</span><span class="p">:</span><span class="n">NO</span> <span class="n">attributes</span><span class="p">:</span><span class="kc">nil</span> <span class="n">error</span><span class="p">:&amp;</span><span class="n">error</span><span class="p">];</span>

<span class="c1">// ディレクトリかどうか</span>
<span class="n">BOOL</span> <span class="n">dir</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span> <span class="p">[</span><span class="n">fm</span> <span class="n">fileExistsAtPath</span><span class="p">:</span><span class="n">path</span> <span class="n">isDirectory</span><span class="p">:&amp;</span><span class="n">dir</span><span class="p">]</span> <span class="p">){</span>
   <span class="k">if</span> <span class="p">(</span> <span class="n">dir</span> <span class="p">){</span>
        <span class="c1">// path is directory.</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ディレクトリ内のファイル列挙</span>
<span class="k">for</span> <span class="p">(</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">path</span> <span class="k">in</span> <span class="p">[</span><span class="n">fm</span> <span class="n">contentsOfDirectoryAtPath</span><span class="p">:</span><span class="n">dst</span> <span class="n">error</span><span class="p">:&amp;</span><span class="n">error</span><span class="p">]</span> <span class="p">){</span>
    <span class="c1">// ....</span>
<span class="p">}</span>

<span class="c1">// NSErrorがnilでなければエラーが発生している</span>
<span class="n">NSLog</span><span class="p">(@</span><span class="s">&quot;%@.&quot;</span><span class="p">,[</span><span class="n">err</span> <span class="n">localizedDescription</span><span class="p">]);</span>
</pre></div>


<h1 id="uiimage">UIImage</h1>
<!-- uiimage:: -->

<p>リンク
<a href="http://ios.ch3cooh.jp/entry/20140730/1406694860">文字列からUIImageオブジェクトを生成する</a>  </p>
<h2 id="_26">生成</h2>
<div class="codehilite"><pre><span class="c1">// プロジェクトに登録済みの画像ファイルを元にUIImageを生成</span>
<span class="kd">let</span> <span class="nv">image</span> <span class="p">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">&quot;image/ume_r.png&quot;</span><span class="p">)</span>

<span class="c1">// 読み込みの成功チェック nil の場合は処理しない</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">imageOK</span> <span class="p">=</span> <span class="n">image</span> <span class="p">{</span>
    <span class="n">imageView1</span><span class="p">!.</span><span class="n">image</span> <span class="p">=</span> <span class="n">imageOK</span>
<span class="p">}</span>
</pre></div>


<h1 id="cgcontext">CGContext</h1>
<p>CGContextを使用すると独自の描画メソッドを使用して描画、結果をUIImageで取得することができる。</p>
<p><strong>サンプル</strong><br>
<a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/MyImageView/MyImageView/CGContextViewController.swift">CGContextViewController.swift</a></p>
<p>CGContextでできること</p>
<ul>
<li>矩形描画</li>
<li>文字描画(フォント、サイズ指定可能)</li>
<li>画像描画(拡大、縮小) ※ただし矩形の切り出しはできない</li>
<li>円、線、曲線描画</li>
</ul>
<p>CGContextの処理手順</p>
<ol>
<li>CGContextのサイズを決めて開く</li>
<li>CGContextを取得<br>（必要であれば）CGContextのtransformを設定</li>
<li>Draw／Render系メソッドを使ってCGContextに画像を描画</li>
<li>CGContextから描画済の画像を取得</li>
<li>CGContextを閉じる</li>
</ol>
<p><a href="http://qiita.com/edo_m18/items/0cdea3f5483a2e5dc16f">[Objective-C] 画像処理についてのまとめ</a></p>
<h3 id="cgcontext_1">シンプルなCGContext使用方法</h3>
<p><strong>コンテキストを使用しない(図形の描画をしない)</strong></p>
<div class="codehilite"><pre><span class="kd">func</span> <span class="nf">creaeImage</span><span class="p">(</span><span class="n">image</span> <span class="p">:</span><span class="bp">UIImage</span><span class="p">)</span> <span class="p">-&gt;</span><span class="bp">UIImage</span>
<span class="p">{</span>
    <span class="c1">// 画像コンテキスト作成(Canvasみたいなもの)</span>
    <span class="kd">let</span> <span class="nv">imageRect</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span><span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>

    <span class="n">UIGraphicsBeginImageContext</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">);</span>

    <span class="c1">// コンテキストにUIImageを描画</span>
    <span class="n">image</span><span class="p">.</span><span class="n">drawInRect</span><span class="p">(</span><span class="n">imageRect</span><span class="p">)</span>

    <span class="c1">// 出力UIImageを取得</span>
    <span class="kd">let</span> <span class="nv">newImage</span> <span class="p">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">();</span>

    <span class="c1">// コンテキストを解放</span>
    <span class="n">UIGraphicsEndImageContext</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">newImage</span>
<span class="p">}</span>
</pre></div>


<p><strong>コンテキストを使用する(図形を描画する)</strong></p>
<div class="codehilite"><pre><span class="kd">func</span> <span class="nf">createRectImage</span><span class="p">(</span><span class="n">size</span> <span class="p">:</span> <span class="bp">CGSize</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UIImage</span>
<span class="p">{</span>
    <span class="c1">// コンテキストを開く</span>
    <span class="n">UIGraphicsBeginImageContextWithOptions</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1">// コンテキストを得る</span>
    <span class="kd">let</span> <span class="nv">context</span><span class="p">:</span><span class="n">CGContextRef</span> <span class="p">=</span> <span class="n">UIGraphicsGetCurrentContext</span><span class="p">()</span><span class="o">!</span>

    <span class="c1">// ■を描画 (CGContextFillRect)</span>
    <span class="c1">// この塗りつぶす領域の大きさを指定</span>
    <span class="kd">let</span> <span class="nv">rect</span><span class="p">:</span><span class="bp">CGRect</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>
    <span class="c1">//　色をRGBAで指定 (r,g,b)</span>
    <span class="n">CGContextSetRGBFillColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="n">CGFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span><span class="n">CGFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span><span class="n">CGFloat</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="c1">// 指定された領域を塗りつぶす</span>
    <span class="n">CGContextFillRect</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">rect</span><span class="p">)</span>

    <span class="c1">// コンテキストに描画済の画像を得る</span>
    <span class="kd">let</span> <span class="nv">newImage</span> <span class="p">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">()</span>
    <span class="c1">// コンテキストを解放</span>
    <span class="n">UIGraphicsEndImageContext</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">newImage</span>
<span class="p">}</span>
</pre></div>


<h1 id="uicolor">UIColor</h1>
<p><!-- uicolor:: -->
色情報を管理するクラス</p>
<div class="codehilite"><pre><span class="c1">// 予め用意された色で生成</span>
<span class="kd">let</span> <span class="nv">color</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">redColor</span><span class="p">()</span>

<span class="c1">//色の割合を指定して生成</span>
<span class="kd">let</span> <span class="nv">color</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">(</span><span class="n">red</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="n">green</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span><span class="n">blue</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span><span class="n">alpha</span><span class="p">:</span><span class="mf">1.0</span><span class="p">)</span>

<span class="c1">// 画像をパターンとして生成</span>
<span class="n">view</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">(</span><span class="n">patternImage</span><span class="p">:</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">&quot;patternImage.png&quot;</span><span class="p">))</span>

<span class="c1">// &quot;00ff88&quot;のようなHexで色を指定するUIColor拡張</span>
<span class="kd">extension</span> <span class="bp">UIColor</span> <span class="p">{</span>
    <span class="kd">class</span> <span class="nc">func</span> <span class="n">hexStr</span> <span class="p">(</span><span class="n">hexStr</span> <span class="p">:</span> <span class="bp">NSString</span><span class="p">,</span> <span class="n">alpha</span> <span class="p">:</span> <span class="n">CGFloat</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UIColor</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">hexStr2</span> <span class="p">=</span> <span class="n">hexStr</span><span class="p">.</span><span class="n">stringByReplacingOccurrencesOfString</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">,</span> <span class="n">withString</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">scanner</span> <span class="p">=</span> <span class="bp">NSScanner</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">hexStr2</span> <span class="kc">as</span> <span class="nb">String</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nv">color</span><span class="p">:</span> <span class="nb">UInt32</span> <span class="p">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">scanner</span><span class="p">.</span><span class="n">scanHexInt</span><span class="p">(&amp;</span><span class="n">color</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nv">r</span> <span class="p">=</span> <span class="n">CGFloat</span><span class="p">((</span><span class="n">color</span> <span class="o">&amp;</span> <span class="mh">0xFF0000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="mf">255.0</span>
            <span class="kd">let</span> <span class="nv">g</span> <span class="p">=</span> <span class="n">CGFloat</span><span class="p">((</span><span class="n">color</span> <span class="o">&amp;</span> <span class="mh">0x00FF00</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">/</span> <span class="mf">255.0</span>
            <span class="kd">let</span> <span class="nv">b</span> <span class="p">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">color</span> <span class="o">&amp;</span> <span class="mh">0x0000FF</span><span class="p">)</span> <span class="o">/</span> <span class="mf">255.0</span>
            <span class="k">return</span> <span class="bp">UIColor</span><span class="p">(</span><span class="n">red</span><span class="p">:</span><span class="n">r</span><span class="p">,</span><span class="n">green</span><span class="p">:</span><span class="n">g</span><span class="p">,</span><span class="n">blue</span><span class="p">:</span><span class="n">b</span><span class="p">,</span><span class="n">alpha</span><span class="p">:</span><span class="n">alpha</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;invalid hex string&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">whiteColor</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">color</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">hexStr</span><span class="p">(</span><span class="s">&quot;FFA73F&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>


<h1 id="alertview">AlertView</h1>
<p><!-- alert:: actionsheet: -->
以前は
ただのポップアップ -&gt; UIAlertView<br>
複数ボタンのポップアップ -&gt; UIActionSheet<br>
を使っていたが、ともにiOS9で廃止されることになった。iOS8以上なら UIAlertControllerが使用できるのでこちらを使用すること。ただし、iOS7以下でも動作するアプリを開発する場合は UIAlertControllerが使えないので、上記のクラスを使用するしかない。  </p>
<p><strong>サンプル</strong><br>
<a href="https://github.com/seafield1979/ios_programing/blob/develop/swift/UIViewTest/UIViewTest/ViewController/AlertViewController.swift">AlertViewController.swift</a></p>
<p><strong>OKボタンだけのポップアップ</strong><br>
UIAlertController(iOS8以降)<br>
UIAlertView(iOS7以前)<br>
<img alt="UIPickerView" src="http://sunsunsoft.com/image/ios/alert1.png">  </p>
<p><strong>ボタンがたくさんあるポップアップ</strong><br>
UIAlertController(iOS8以降)<br>
UIActionSheet(iOS7以前)<br>
<img alt="UIPickerView" src="http://sunsunsoft.com/image/ios/alert2.png"></p>
<h1 id="cgpoint-cgrect-cgfloat">座標指定 CGPoint CGRect CGFloat</h1>
<!-- cgpoint:: cgrect:: cgfloat:: -->

<h3 id="cgfloat">CGFloat 浮動小数点</h3>
<div class="codehilite"><pre><span class="c1">// 変数宣言</span>
<span class="kd">var</span> <span class="nv">pos_x</span> <span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="mf">1.0</span>

<span class="c1">// Intに変換</span>
<span class="kd">let</span> <span class="nv">int1</span> <span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="nb">Int</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span>

<span class="c1">// CGFloatに変換</span>
<span class="n">pos_x</span> <span class="p">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">int1</span><span class="p">)</span>

<span class="c1">// CGFloatとIntで計算ができない</span>
<span class="kd">let</span> <span class="nv">posX</span> <span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="mf">10.0</span>
<span class="kd">let</span> <span class="nv">num</span> <span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">3</span>
<span class="c1">//let posX2 : CGFloat = posX * num  エラー</span>
<span class="kd">let</span> <span class="nv">posX2</span> <span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="n">posX</span> <span class="o">*</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>


<h3 id="cgpoint">CGPoint 座標</h3>
<p>Make系はラベルなし</p>
<div class="codehilite"><pre>    <span class="c1">// CGPoint を作成する</span>
    <span class="kd">let</span> <span class="nv">pos</span> <span class="p">=</span> <span class="bp">CGPoint</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">200.0</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">pos2</span> <span class="p">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">)</span>

    <span class="c1">// viewの座標に設定する</span>
    <span class="n">view1</span><span class="p">!.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span> <span class="p">=</span> <span class="bp">CGPoint</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mf">100.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mf">200.0</span><span class="p">)</span>
    <span class="n">view2</span><span class="p">!.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span> <span class="p">=</span> <span class="n">pos2</span>
</pre></div>


<h3 id="cgrect">CGRect 矩形の座標とサイズ</h3>
<div class="codehilite"><pre>    <span class="c1">// CGRect を作成する</span>
    <span class="kd">let</span> <span class="nv">rect</span> <span class="p">=</span> <span class="bp">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span><span class="mi">100</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">rect2</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span> 

    <span class="c1">// viewのフレームに設定する</span>
    <span class="n">view1</span><span class="p">!.</span><span class="n">frame</span> <span class="p">=</span> <span class="bp">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">view2</span><span class="p">!.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">rect2</span>
</pre></div>


<h2 id="layer">layerについて</h2>
<p>UIViewはCALayer(.layerプロパティ)を持っている
CALayerはUIViewの上に乗っている
CALayerの座標を変えると、見た目の座標が変わる
UIViewの座標はそのままにCALayerの座標や表示プロパティを変更することで見た目を変えることができる。</p>
<h1 id="autolayout">Autolayout</h1>
<h2 id="autolayout_1">コードでAutolayoutを追加する</h2>
<p><a href="http://qiita.com/bonegollira/items/5c973206b82f6c4d55ea">コードでAutolayout</a></p>
<h3 id="_27">サンプル</h3>
<h4 id="1">1つづつ制約を追加する</h4>
<p>NSLayoutConstraintオブジェクトを作成し、.addConstraint メソッドで１つづつ制約を追加する</p>
<div class="codehilite"><pre><span class="c1">// view1</span>
<span class="kd">let</span> <span class="nv">view1</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<span class="n">view1</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">redColor</span><span class="p">()</span>

<span class="c1">// 先にaddSubviewしないと制約を追加できない</span>
<span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">view1</span><span class="p">)</span>

<span class="n">view1</span><span class="p">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="p">=</span> <span class="kc">false</span>

<span class="c1">// Top</span>
<span class="kd">let</span> <span class="nv">topConstraint</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">)</span>

<span class="c1">// Left</span>
<span class="kd">let</span> <span class="nv">leftConstraint</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Left</span><span class="p">,</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Left</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">)</span>

<span class="c1">// Width</span>
<span class="kd">let</span> <span class="nv">widthConstraint</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">)</span>

<span class="c1">// Heigth</span>
<span class="kd">let</span> <span class="nv">heightConstraint</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Height</span><span class="p">,</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Height</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">)</span>

<span class="n">view</span><span class="p">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">topConstraint</span><span class="p">)</span>
<span class="n">view</span><span class="p">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">leftConstraint</span><span class="p">)</span>
<span class="n">view</span><span class="p">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">widthConstraint</span><span class="p">)</span>
<span class="n">view</span><span class="p">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">heightConstraint</span><span class="p">)</span>
</pre></div>


<h4 id="_28">まとめて制約を追加する</h4>
<p>.addConstraintsでまとめて制約を追加する</p>
<div class="codehilite"><pre><span class="n">view1</span><span class="p">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="p">=</span> <span class="kc">false</span>

<span class="c1">// Top</span>
<span class="n">view</span><span class="p">.</span><span class="n">addConstraints</span><span class="p">([</span>
    <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
        <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>
        <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
        <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>
        <span class="n">multiplier</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>
    <span class="p">),</span>
    <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
        <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Left</span><span class="p">,</span>
        <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
        <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Left</span><span class="p">,</span>
        <span class="n">multiplier</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">constant</span><span class="p">:</span> <span class="mi">120</span>
    <span class="p">),</span>

    <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
        <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
        <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
        <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
        <span class="n">multiplier</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>
    <span class="p">),</span>

    <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
        <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Height</span><span class="p">,</span>
        <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
        <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Height</span><span class="p">,</span>
        <span class="n">multiplier</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>
    <span class="p">)]</span>
<span class="p">)</span>
</pre></div>


<h4 id="_29">いろいろな制約</h4>
<div class="codehilite"><pre><span class="c1">// Top/Bottom/Left/Right Space</span>
<span class="c1">// Viewの上下左右にスペースをもうける</span>
<span class="kd">let</span> <span class="nv">constraint1</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>        <span class="c1">// 制約を追加するView</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>    <span class="c1">// .Top / .Bottom / .Left(.Leading) / .Right(.Tailing)</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>   <span class="c1">// 基準となるView</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Top</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>    <span class="c1">// 1.0固定</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>       <span class="c1">// スペースのピクセル数</span>
<span class="p">)</span>

<span class="c1">// Width/Height</span>
<span class="c1">// 幅、高さを固定値で設定</span>
<span class="kd">let</span> <span class="nv">constraint2</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>    <span class="c1">// 制約を追加するView</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>    <span class="c1">// .Width / .Height</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>    <span class="c1">// 基準となるView</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>        <span class="c1">// 0: constantの値の幅(高さ) / 0以外: toItemのViewの幅(高さ)の割合(0.5:50%, 1.0: 100%)</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">100</span>         <span class="c1">// ピクセル数</span>
<span class="p">)</span>

<span class="c1">// 基準Viewの幅、高さの割合(%)を指定</span>
<span class="kd">let</span> <span class="nv">constraint3</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>    <span class="c1">// 制約を追加するView</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>    <span class="c1">// .Width / .Height</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>    <span class="c1">// 基準となるView</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">Width</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>        <span class="c1">// 基準となるViewの何%の幅(高さにするか)</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">0</span>            <span class="c1">// ０固定</span>
<span class="p">)</span>

<span class="c1">// センタリング</span>
<span class="c1">// 基準位置にViewの中心を合わせる</span>
<span class="kd">let</span> <span class="nv">centerX</span> <span class="p">=</span> <span class="bp">NSLayoutConstraint</span><span class="p">(</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">CenterY</span><span class="p">,</span>  <span class="c1">// 中心(垂直)</span>
    <span class="n">relatedBy</span><span class="p">:</span> <span class="p">.</span><span class="n">Equal</span><span class="p">,</span>
    <span class="n">toItem</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="p">.</span><span class="n">CenterY</span><span class="p">,</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>        <span class="c1">// センタリング位置 1/2:全体の1/4, 1.0:中央, 3/2:全体の3/4</span>
    <span class="n">constant</span><span class="p">:</span> <span class="mi">0</span>             <span class="c1">// オフセット センタリング位置からどれだけずらすか</span>
<span class="p">)</span>
</pre></div>


<h1 id="http_1">http通信</h1>
<p><!-- http::　https:: -->
httpでサーバーとの通信を行う。<br>
"http://hoge.com/test/" のようなURLを指定してAPIをコールしレスポンス（応答）を受信する。</p>
<h2 id="nsurlsession">NSURLSession</h2>
<p>HTTP通信は以前は NSURLConnection を使っていたが、最新のiOS(iOS7以降)ではNRURLSessionクラスを使用する。</p>
<h3 id="_30">同期型</h3>
<p>同期型は通信が終わるまで処理を待つタイプ。通信が終わるまで処理が帰ってこないので、通信に時間がかかったりするとアプリが固まったようになってしまうため、使用はテスト用程度にしておくのが好ましい。</p>
<p><strong>同期型サンプル</strong></p>
<div class="codehilite"><pre><span class="kd">func</span> <span class="nf">testSynchronism</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// create the url-request</span>
    <span class="kd">let</span> <span class="nv">urlString</span> <span class="p">=</span> <span class="s">&quot;http://sunsunsoft.com/test/ios/hello.php&quot;</span>
    <span class="kd">let</span> <span class="nv">request</span> <span class="p">=</span> <span class="bp">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="p">:</span> <span class="bp">NSURL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">urlString</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>

    <span class="c1">// set the method(HTTP-GET)</span>
    <span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="p">=</span> <span class="s">&quot;GET&quot;</span>

    <span class="c1">// use NSURLSessionDataTask</span>
    <span class="kd">let</span> <span class="nv">task</span> <span class="p">=</span> <span class="bp">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">().</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="p">==</span> <span class="kc">nil</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nv">result</span> <span class="p">=</span> <span class="bp">NSString</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">!,</span> <span class="n">encoding</span><span class="p">:</span> <span class="n">NSUTF8StringEncoding</span><span class="p">)</span><span class="o">!</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>
    <span class="n">task</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span>
 <span class="c1">//レスポンス取得後の処理</span>
<span class="kd">func</span> <span class="nf">getHttp</span><span class="p">(</span><span class="n">res</span><span class="p">:</span><span class="bp">NSURLResponse</span><span class="p">?,</span><span class="n">data</span><span class="p">:</span><span class="bp">NSData</span><span class="p">?,</span><span class="n">error</span><span class="p">:</span><span class="bp">NSError</span><span class="p">?)</span>
<span class="p">{</span>
    <span class="kd">let</span> <span class="nv">response</span><span class="p">:</span><span class="bp">NSString</span> <span class="p">=</span> <span class="bp">NSString</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">!,</span> <span class="n">encoding</span><span class="p">:</span> <span class="n">NSUTF8StringEncoding</span><span class="p">)</span><span class="o">!</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p><strong>php</strong></p>
<div class="codehilite"><pre><span class="cp">&lt;?php</span>
    <span class="k">echo</span> <span class="s2">&quot;hello world!!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>


<h3 id="_31">非同期型</h3>
<p>通信が終わるまで処理を待たないタイプ。受信開始時やデータ受信時、完了時に指定のdelegateメソッドがコールされるので、これらのdelegateメソッドで処理を行う。</p>
<p><strong>非同期型サンプル</strong></p>
<div class="codehilite"><pre><span class="c1">// プロトコルにNSURLSessionTaskDelegateを追加する</span>
<span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="bp">UIViewController</span><span class="p">,</span> <span class="bp">NSURLSessionTaskDelegate</span> <span class="p">{</span>

<span class="kd">func</span> <span class="nf">testAsynchronous</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 送信したいURLを作成し、Requestを作成します。</span>
    <span class="kd">let</span> <span class="nv">url</span> <span class="p">=</span> <span class="bp">NSURL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span><span class="s">&quot;http://sunsunsoft.com/test/ios/hello.php&quot;</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">request</span> <span class="p">=</span> <span class="bp">NSURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="p">:</span> <span class="n">url</span><span class="p">!)</span>

    <span class="c1">// NSURLSessionConfigurationでhttp通信を接続</span>
    <span class="kd">let</span> <span class="nv">configuration</span> <span class="p">=</span> <span class="bp">NSURLSessionConfiguration</span><span class="p">.</span><span class="n">defaultSessionConfiguration</span><span class="p">();</span>
    <span class="kd">let</span> <span class="nv">session</span> <span class="p">=</span> <span class="bp">NSURLSession</span><span class="p">(</span><span class="n">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">delegate</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">delegateQueue</span><span class="p">:</span> <span class="bp">NSOperationQueue</span><span class="p">.</span><span class="n">mainQueue</span><span class="p">())</span>

    <span class="kd">let</span> <span class="nv">task</span><span class="p">:</span><span class="bp">NSURLSessionDataTask</span> <span class="p">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">task</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * HTTPリクエストのデリゲートメソッド(データ受け取り初期処理)</span>
<span class="cm"> */</span>
<span class="kd">func</span> <span class="nf">URLSession</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="bp">NSURLSession</span><span class="p">,</span> <span class="n">dataTask</span><span class="p">:</span> <span class="bp">NSURLSessionDataTask</span><span class="p">,</span> <span class="n">didReceiveResponse</span> <span class="n">response</span><span class="p">:</span> <span class="bp">NSURLResponse</span><span class="p">,</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="p">(</span><span class="n">NSURLSessionResponseDisposition</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">let</span> <span class="nv">httpResponse</span> <span class="p">=</span> <span class="n">response</span> <span class="kc">as</span><span class="p">!</span> <span class="bp">NSHTTPURLResponse</span><span class="p">;</span>

    <span class="n">responseData</span> <span class="p">=</span> <span class="bp">NSMutableData</span><span class="p">()</span>

    <span class="c1">// Headerの情報の確認</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">httpResponse</span><span class="p">.</span><span class="n">statusCode</span> <span class="p">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">completionHandler</span><span class="p">(</span><span class="n">NSURLSessionResponseDisposition</span><span class="p">.</span><span class="n">Allow</span><span class="p">);</span>   <span class="c1">// 続ける</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// error.code = -999で終了メソッドが呼ばれる</span>
        <span class="n">completionHandler</span><span class="p">(</span><span class="n">NSURLSessionResponseDisposition</span><span class="p">.</span><span class="n">Cancel</span><span class="p">);</span>  <span class="c1">// 止める</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * HTTPリクエストのデリゲートメソッド(受信の度に実行)</span>
<span class="cm"> */</span>
<span class="kd">func</span> <span class="nf">URLSession</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="bp">NSURLSession</span><span class="p">,</span> <span class="n">dataTask</span><span class="p">:</span> <span class="bp">NSURLSessionDataTask</span><span class="p">,</span> <span class="n">didReceiveData</span> <span class="n">data</span><span class="p">:</span> <span class="bp">NSData</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">responseData</span><span class="p">!.</span><span class="n">appendData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * HTTPリクエストのデリゲートメソッド(完了処理)</span>
<span class="cm"> */</span>
<span class="kd">func</span> <span class="nf">URLSession</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="bp">NSURLSession</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="bp">NSURLSessionTask</span><span class="p">,</span> <span class="n">didCompleteWithError</span> <span class="n">error</span><span class="p">:</span> <span class="bp">NSError</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">_error</span> <span class="p">=</span> <span class="n">error</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">_error</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">str</span> <span class="p">=</span> <span class="nb">String</span><span class="p">(</span><span class="bp">NSString</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">responseData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
        <span class="n">textView1</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">str</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
        <span class="c1">// ファイルに保存してみる</span>
        <span class="n">saveDataToFile</span><span class="p">(</span><span class="n">responseData</span><span class="p">,</span> <span class="n">fileName</span><span class="p">:</span> <span class="s">&quot;hoge.txt&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h1 id="afnetworking">AFNetworking</h1>
<h2 id="afnetworking_1">AFNetworkingのインストール</h2>
<p>podからのインストールしたAFNetworkingだとソースが読み込めなかったため、Githubから自前でAFNetworkingのソースを取得しプロジェクトに組み込む。-&gt; <a href="http://qiita.com/tajihiro/items/294ce7440c8316962da2">SwiftとAFNetworkingの簡単サンプル 最新情報 2015/01</a><br>
しかも、最新のバージョン(3.x)だとWebに転がっているようなサンプルが動かないため、古いバージョン(2.x)系を使うようにする。</p>
<h2 id="_32">リンク</h2>
<table>
<thead>
<tr>
<th>リンク</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://qiita.com/tajihiro/items/ad8606f61f3273423ea8">SwiftとAFNetworkingの簡単サンプル</a></td>
<td>GithubからダウンロードしたAFNetworkingをプロジェクトに組み込む方法。※ただし最新のAFNetworkingだとだめ。2.x系を使用すること。</td>
</tr>
<tr>
<td><a href="http://qiita.com/tajihiro/items/294ce7440c8316962da2">SwiftとAFNetworkingの簡単サンプル 最新情報 2015/01</a></td>
<td>上のリンクの方法でAFNetworkingがインストールできない場合に自前でプロジェクトに組み込む方法</td>
</tr>
<tr>
<td><a href="http://qiita.com/hmuronaka/items/7e4f75eae1cccf1007e3">AFNetworking2.xを利用して、HTMLやテキストを取得する</a></td>
<td>プレーンテキストを受け取る</td>
</tr>
<tr>
<td><a href="http://sakahara.hatenablog.jp/entry/2014/06/08/211918">sakaharaのブログ</a></td>
<td>AFNetworkingを使用したGET,POSTメッセージの送信</td>
</tr>
</tbody>
</table>
<h2 id="_33">パラメータ</h2>
<p>送信と受信のデータをどのようなものにするかをオプションで設定できる。例えば受信データを php の echo 等のプレーンテキストで受け取る場合は  </p>
<div class="codehilite"><pre>let manager = AFHTTPRequestOperationManager()
manager.responseSerializer = AFHTTPResponseSerializer()
</pre></div>


<p>のように設定する。</p>
<p><strong>.requestSerializer  リクエスト(送信)オプション</strong></p>
<table>
<thead>
<tr>
<th>パラメータ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>AFHTTPRequestSerializer</td>
<td>HTTPリクエストパラメータ（デフォルト）</td>
</tr>
<tr>
<td>AFJSONRequestSerializer</td>
<td>JSON形式のリクエストパラメータ</td>
</tr>
<tr>
<td>AFPropertyListRequestSerializer</td>
<td>plist形式のリクエストパラメータ</td>
</tr>
</tbody>
</table>
<p><strong>.responseSerializer  レスポンス(受信)オプション</strong></p>
<table>
<thead>
<tr>
<th>パラメータ</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>AFHTTPResponseSerializer</td>
<td>HTTPレスポンス(プレーンテキスト)</td>
</tr>
<tr>
<td>AFJSONResponseSerializer</td>
<td>JSON形式のレスポンス（デフォルト）</td>
</tr>
</tbody>
</table>
<div class="codehilite"><pre><span class="kd">let</span> <span class="nv">manager</span> <span class="p">=</span> <span class="n">AFHTTPRequestOperationManager</span><span class="p">()</span>
<span class="n">manager</span><span class="p">.</span><span class="n">requestSerializer</span> <span class="p">=</span> <span class="n">AFHTTPRequestSerializer</span><span class="p">()</span>  <span class="c1">// 文字列形式で送る</span>
<span class="n">manager</span><span class="p">.</span><span class="n">responseSerializer</span> <span class="p">=</span> <span class="n">AFJSONResponseSerializer</span><span class="p">()</span>  <span class="c1">// JSONオブジェクトを変換して受け取る</span>
</pre></div>


<h2 id="_34">サンプル</h2>
<p>swiftのサンプルと対応するphpのサンプルもつける</p>
<h3 id="get">GETリクエストを送り、結果をプレーンテキストで受信</h3>
<p><em>swift</em></p>
<div class="codehilite"><pre><span class="c1">// GET送信</span>
<span class="c1">// プレーンテキスト取得</span>
<span class="kd">func</span> <span class="nf">testAFNetworkingGET</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nv">manager</span> <span class="p">=</span> <span class="n">AFHTTPRequestOperationManager</span><span class="p">()</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">responseSerializer</span> <span class="p">=</span> <span class="n">AFHTTPResponseSerializer</span><span class="p">()</span>

    <span class="c1">// GETメッセージを作成</span>
    <span class="kd">let</span> <span class="nv">getURL</span> <span class="p">=</span> <span class="n">http</span><span class="p">:</span><span class="c1">//sunsunsoft.com/test/ios/test_get.php?param1=hoge&amp;param2=mage&quot;</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">GET</span><span class="p">(</span><span class="n">getURL</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
                <span class="n">success</span><span class="p">:</span> <span class="p">{(</span><span class="n">operation</span><span class="p">,</span> <span class="n">responsedObject</span><span class="p">)</span> <span class="k">in</span>
                    <span class="kd">let</span> <span class="nv">str</span> <span class="p">:</span> <span class="bp">NSString</span> <span class="p">=</span> <span class="bp">NSString</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="n">responsedObject</span> <span class="kc">as</span><span class="p">!</span> <span class="bp">NSData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">)</span><span class="o">!</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;response: </span><span class="si">\(</span><span class="n">str</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">},</span>

                <span class="n">failure</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;error: </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p><em>php</em></p>
<div class="codehilite"><pre><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="s2">&quot;GET message&quot;</span><span class="p">;</span>

<span class="c1">// GETメッセージを全部表示</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$_GET</span> <span class="k">as</span> <span class="nv">$key</span><span class="o">=&gt;</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;key=</span><span class="si">${</span><span class="nv">key</span><span class="si">}</span><span class="s2"> value=</span><span class="si">${</span><span class="nv">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s2">&quot;hoge&quot;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>


<h3 id="post">POSTリクエストを送り、結果をプレーンテキストで受信</h3>
<p><strong>swift</strong></p>
<div class="codehilite"><pre><span class="c1">// POSTで送信</span>
<span class="c1">// プレーンテキスト受信</span>
<span class="kd">func</span> <span class="nf">testAFNetworkingPOST</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">manager</span> <span class="p">=</span> <span class="n">AFHTTPRequestOperationManager</span><span class="p">()</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">responseSerializer</span> <span class="p">=</span> <span class="n">AFHTTPResponseSerializer</span><span class="p">()</span>
    <span class="kd">let</span> <span class="nv">param</span><span class="p">:</span><span class="nb">Dictionary</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;param1&quot;</span> <span class="p">:</span> <span class="s">&quot;value1&quot;</span><span class="p">,</span> <span class="s">&quot;param2&quot;</span> <span class="p">:</span> <span class="s">&quot;value2&quot;</span><span class="p">]</span>

    <span class="n">manager</span><span class="p">.</span><span class="n">POST</span><span class="p">(</span><span class="s">&quot;http://sunsunsoft.com/test/ios/test_post.php&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="n">param</span><span class="p">,</span>
                 <span class="n">success</span><span class="p">:</span> <span class="p">{</span>
                    <span class="p">(</span><span class="n">operation</span><span class="p">:</span> <span class="n">AFHTTPRequestOperation</span><span class="p">!,</span> <span class="n">responsedObject</span><span class="p">:</span><span class="nb">AnyObject</span><span class="p">!)</span> <span class="k">in</span>
                    <span class="kd">let</span> <span class="nv">str</span> <span class="p">:</span> <span class="bp">NSString</span> <span class="p">=</span> <span class="bp">NSString</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="n">responsedObject</span> <span class="kc">as</span><span class="p">!</span> <span class="bp">NSData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">)</span><span class="o">!</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;response: </span><span class="si">\(</span><span class="n">str</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>

        <span class="p">},</span> <span class="n">failure</span><span class="p">:</span> <span class="p">{</span>
            <span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Error: </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span>
</pre></div>


<p><strong>php</strong></p>
<div class="codehilite"><pre>&lt;?php

echo &quot;POST message\n&quot;;

// POSTメッセージを全部表示
foreach($_POST as $key=&gt;$value) {
    echo &quot;key=${key} value=${value}\n&quot;;
}

echo &quot;hoge&quot;;

?&gt;
</pre></div>


<h3 id="json">JSONをそのまま取得</h3>
<p><strong>swift</strong></p>
<div class="codehilite"><pre><span class="c1">// JSON受信</span>
<span class="kd">func</span> <span class="nf">testAFNetworkingJSON</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//リクエスト</span>
    <span class="kd">let</span> <span class="nv">manager</span> <span class="p">=</span> <span class="n">AFHTTPRequestOperationManager</span><span class="p">()</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">requestSerializer</span> <span class="p">=</span> <span class="n">AFJSONRequestSerializer</span><span class="p">()</span>

    <span class="n">manager</span><span class="p">.</span><span class="n">GET</span><span class="p">(</span><span class="s">&quot;http://sunsunsoft.com/test/ios/test.json&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
                <span class="n">success</span><span class="p">:</span> <span class="p">{(</span><span class="n">operation</span><span class="p">:</span> <span class="n">AFHTTPRequestOperation</span><span class="p">!,</span> <span class="n">responsedObject</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">!)</span> <span class="k">in</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Success!!&quot;</span><span class="p">)</span>

                    <span class="c1">// responsedObject を表示。ただ、Dictionary型なので存在しない要素にアクセスしようとしようとすると落ちる</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">responsedObject</span><span class="p">)</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">responsedObject</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">])</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">responsedObject</span><span class="p">[</span><span class="s">&quot;b&quot;</span><span class="p">])</span>
                    <span class="c1">// print(responsedObject[0])        // 落ちる</span>

                    <span class="c1">// SwiftyJSONオブジェクトに変換</span>
                    <span class="kd">let</span> <span class="nv">json</span> <span class="p">=</span> <span class="n">JSON</span><span class="p">(</span><span class="n">responsedObject</span><span class="p">)</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">])</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;b&quot;</span><span class="p">])</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>           <span class="c1">// 落ちない</span>
        <span class="p">},</span>
                <span class="n">failure</span><span class="p">:</span> <span class="p">{(</span><span class="n">operation</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Error!!&quot;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p><strong>json</strong></p>
<div class="codehilite"><pre>{
    &quot;a&quot;:&quot;1&quot;,
    &quot;b&quot;:&quot;2&quot;,
    &quot;c&quot;:&quot;3&quot;
}
</pre></div>


<h3 id="jsonpostjson">JSON形式のPOSTリクエストを送り、結果をJSON形式のテキストで受信</h3>
<p><strong>swift</strong></p>
<div class="codehilite"><pre><span class="c1">// テキスト形式JSON受信</span>
<span class="kd">func</span> <span class="nf">testAFNetworkingJSON2</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//リクエスト</span>
    <span class="kd">let</span> <span class="nv">manager</span> <span class="p">=</span> <span class="n">AFHTTPRequestOperationManager</span><span class="p">()</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">responseSerializer</span> <span class="p">=</span> <span class="n">AFHTTPResponseSerializer</span><span class="p">()</span>  <span class="c1">// textを受け取る</span>

    <span class="kd">let</span> <span class="nv">param</span><span class="p">:</span><span class="nb">Dictionary</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;param1&quot;</span> <span class="p">:</span> <span class="s">&quot;value1&quot;</span><span class="p">,</span> <span class="s">&quot;param2&quot;</span> <span class="p">:</span> <span class="s">&quot;value2&quot;</span><span class="p">,</span>
                             <span class="s">&quot;array1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
                             <span class="s">&quot;dic1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&quot;key1&quot;</span> <span class="p">:</span> <span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;key2&quot;</span> <span class="p">:</span> <span class="s">&quot;hoge&quot;</span><span class="p">]]</span>

    <span class="n">manager</span><span class="p">.</span><span class="n">POST</span><span class="p">(</span><span class="s">&quot;http://sunsunsoft.com/test/ios/test_json.php&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="n">param</span><span class="p">,</span>
                <span class="n">success</span><span class="p">:</span> <span class="p">{(</span><span class="n">operation</span><span class="p">:</span> <span class="n">AFHTTPRequestOperation</span><span class="p">!,</span> <span class="n">responsedObject</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">!)</span> <span class="k">in</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Success!!&quot;</span><span class="p">)</span>
                    <span class="kd">let</span> <span class="nv">str</span> <span class="p">:</span> <span class="bp">NSString</span> <span class="p">=</span> <span class="bp">NSString</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="n">responsedObject</span> <span class="kc">as</span><span class="p">!</span> <span class="bp">NSData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">)</span><span class="o">!</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;response: </span><span class="si">\(</span><span class="n">str</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>

                    <span class="c1">// print(responsedObject[&quot;param1&quot;]);  responsedObjectはJSONオブジェクトになっていないのでエラー</span>

                    <span class="c1">// SwiftyJSONオブジェクトに変換</span>
                    <span class="c1">// phpが返すのは json_encode したJSON文字列</span>
                    <span class="k">if</span> <span class="kd">let</span> <span class="nv">response</span> <span class="p">=</span> <span class="n">responsedObject</span> <span class="p">{</span>
                        <span class="kd">let</span> <span class="nv">json</span> <span class="p">=</span> <span class="n">JSON</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="n">response</span> <span class="kc">as</span><span class="p">!</span> <span class="bp">NSData</span><span class="p">)</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;param1&quot;</span><span class="p">])</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;param2&quot;</span><span class="p">])</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;array1&quot;</span><span class="p">])</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>           <span class="c1">// 落ちない</span>
                    <span class="p">}</span>
        <span class="p">},</span>
                <span class="n">failure</span><span class="p">:</span> <span class="p">{(</span><span class="n">operation</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Error!!&quot;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p><strong>php</strong></p>
<div class="codehilite"><pre>&lt;?php

// GETメッセージを全部表示
$json = json_encode($_POST);
print_r($json);

?&gt;
</pre></div>


<h3 id="jsonpostjson_1">JSON形式のPOSTリクエストを送り、結果をJSONオブジェクトで受信</h3>
<p><strong>swift</strong></p>
<div class="codehilite"><pre><span class="c1">// POSTしたデータをJSONオブジェクト形式で受信</span>
<span class="kd">func</span> <span class="nf">testAFNetworkingJSON3</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//リクエスト</span>
    <span class="kd">let</span> <span class="nv">manager</span> <span class="p">=</span> <span class="n">AFHTTPRequestOperationManager</span><span class="p">()</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">requestSerializer</span> <span class="p">=</span> <span class="n">AFHTTPRequestSerializer</span><span class="p">()</span>  <span class="c1">// 文字列形式で送る</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">responseSerializer</span> <span class="p">=</span> <span class="n">AFJSONResponseSerializer</span><span class="p">()</span>  <span class="c1">// JSONオブジェクトを変換して受け取る</span>

    <span class="kd">let</span> <span class="nv">param</span><span class="p">:</span><span class="nb">Dictionary</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;param1&quot;</span> <span class="p">:</span> <span class="s">&quot;value1&quot;</span><span class="p">,</span> <span class="s">&quot;param2&quot;</span> <span class="p">:</span> <span class="s">&quot;value2&quot;</span><span class="p">,</span>
                            <span class="s">&quot;array1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
                            <span class="s">&quot;dic1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&quot;key1&quot;</span> <span class="p">:</span> <span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;key2&quot;</span> <span class="p">:</span> <span class="s">&quot;hoge&quot;</span><span class="p">]]</span>

    <span class="n">manager</span><span class="p">.</span><span class="n">POST</span><span class="p">(</span><span class="s">&quot;http://sunsunsoft.com/test/ios/test_json2.php&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="n">param</span><span class="p">,</span>
                 <span class="n">success</span><span class="p">:</span> <span class="p">{(</span><span class="n">operation</span><span class="p">:</span> <span class="n">AFHTTPRequestOperation</span><span class="p">!,</span> <span class="n">responsedObject</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">!)</span> <span class="k">in</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Success!!&quot;</span><span class="p">)</span>

                    <span class="bp">print</span><span class="p">(</span><span class="n">responsedObject</span><span class="p">[</span><span class="s">&quot;param1&quot;</span><span class="p">]);</span>

                    <span class="c1">// SwiftyJSONオブジェクトに変換</span>
                    <span class="c1">// phpが返すのは json_encode したJSON文字列</span>
                    <span class="k">if</span> <span class="kd">let</span> <span class="nv">response</span> <span class="p">=</span> <span class="n">responsedObject</span> <span class="p">{</span>
                        <span class="kd">let</span> <span class="nv">json</span> <span class="p">=</span> <span class="n">JSON</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;param1&quot;</span><span class="p">])</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;param2&quot;</span><span class="p">])</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;array1&quot;</span><span class="p">])</span>
                        <span class="bp">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">&quot;dic1&quot;</span><span class="p">])</span>
                    <span class="p">}</span>
        <span class="p">},</span>
                 <span class="n">failure</span><span class="p">:</span> <span class="p">{(</span><span class="n">operation</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
                    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Error!!&quot;</span><span class="p">)</span>
                    <span class="bp">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p><strong>php</strong></p>
<div class="codehilite"><pre>&lt;?php

// 渡ってきたPOSTデータ(json)をJSONオブジェクトに変換してから返す

// Content-Typeを「application/json」に設定します。
header(&quot;Content-Type: application/json; charset=UTF-8&quot;);

// IEがContent-Typeヘッダーを無視しないようにします(HTML以外のものをHTML扱いしてしまうことを防ぐため)
header(&quot;X-Content-Type-Options: nosniff&quot;);

// 可能な限りのエスケープを行い、JSON形式で結果を返します。
echo json_encode(
    $_POST,
    JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP
);
?&gt;
</pre></div>


<h1 id="skills">便利・小技 skills</h1>
<h3 id="storyboard">storyboardを使わないプログラムテンプレート</h3>
<ul>
<li>プロジェクトの Main.storyboard を削除</li>
<li>Info.plist内のMain storyboard file base nameの値を空白にする</li>
<li>General - Deployment Info 内のMain Interfaceの値を空白にする</li>
<li>AppDelegate.swiftに以下のコードを記述する</li>
</ul>
<div class="codehilite"><pre><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="n">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="bp">NSObject</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span>
<span class="p">{</span>
    <span class="n">window</span> <span class="p">=</span> <span class="bp">UIWindow</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span><span class="bp">UIScreen</span><span class="p">.</span><span class="n">mainScreen</span><span class="p">().</span><span class="n">bounds</span><span class="p">)</span>

    <span class="c1">// 最初に表示されるViewControllerを生成</span>
    <span class="kd">let</span> <span class="nv">viewController</span> <span class="p">=</span> <span class="bp">UIViewController</span><span class="p">()</span>

    <span class="c1">// Viewの色を変える</span>
    <span class="n">viewController</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">yellowColor</span><span class="p">()</span>

    <span class="n">window</span><span class="p">!.</span><span class="n">rootViewController</span> <span class="p">=</span> <span class="n">viewController</span>
    <span class="n">window</span><span class="p">!.</span><span class="n">makeKeyAndVisible</span><span class="p">();</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>


<h3 id="_35">画面サイズを取得</h3>
<div class="codehilite"><pre><span class="kd">let</span> <span class="nv">myBoundSize</span><span class="p">:</span> <span class="bp">CGSize</span> <span class="p">=</span> <span class="bp">UIScreen</span><span class="p">.</span><span class="n">mainScreen</span><span class="p">().</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span>
</pre></div>
        </article>
      </div>
    </div>
  </body>
</html>
